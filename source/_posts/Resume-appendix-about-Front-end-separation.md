title: 写简历引发的回忆录 － 关于MVC和前后端分离等等等等
date: 2015-12-26 23:43:13
tags:
---

### MVCC MVC MVVC...

看着5月在学校里写的简历中有一句对实习做的项目描述：“采用MVCC设计思路，尽量将前后端分离....”。
😓着实给自己捏了一把汗，那时对mvc的理解大概是model负责数据逻辑，view负责展示界面，controller负责业务逻辑，认为后端从controller吐出jsp“页面”，完成了一次 M - C - V ,我在页面中的处理，控制交互和数据的展示又是一层control，于是写下了MVCC这个自创的词汇😓。
现在的理解是：<b>MV＊是一种分层的思路，是业务需求催生出来的产物，C把M和V解耦，把UI逻辑与数据业务逻辑分离。</b>
对于后台接口来说更多是控制增删查改的过程，关乎数据结构的设计，关乎数据的关联。
当然接口不会去考虑为啥用户要这样输入，要那样阅读，要点击打开，要滑动翻页，要缩放，还要3Dtouch。
前端的价值更凸显在同用户打交道，还原设计，交互，追求更好的浏览体验。
MVVC第二个V是viewModel，可复用的视图模块，这里要说到数据的双向绑定，处理用户输入模块时，对此处理解更深刻，比如，为了方面维护，我用一个弹窗去实现预约单的增删改查，接触到vue.js之后呢，事情就变得十分清晰了。

```
//此处应该有代码对比

```

### 前后端分离

> 看着5月在学校里写的简历中有一句对实习做的项目描述：“采用MVCC设计思路，尽量将前后端分离....”。

还谈前后端分离，那时的想法是分离就是要<b>剥离对后端的环境依赖</b>（败给了经常出现的看不懂的java工程一大堆异常），那时也只有一个java程序员（同样是未毕业的实习生），自己先写静态页面，几个json假数据折腾展示，用jsp的include方法把header跟footer复用,还好是自己整理的需求要做的页面不多，（网站的空间已经被回收，得找找截图之类）。

直到9月公司转型做平台，我们要快速出一个能展示房源，能筛选，搜索的官网，然而后台同学要去支援终端开发，前端主程提出官网用Laravel由前端自己写，由此开启对web开发的新认识。反向代理，路由，控制器，中间件，实体，请求，响应，视图....
自己去写完一个业务的成就感爆棚，也会去想哪个环节做哪些事情更合适，不仅仅是全在页面出来之后用前端三剑客去做，要衡量开发成本和展示效果。这时候，我们已经脱离了java的开发环境，自己调试接口也是心中有数，当然此时的业务逻辑还比较简单能写得来，就冲着修改controller往后的代码不用重启server这一点，幸福感已然超过之前。

10月尾租房行业渐入寒冬，淡季来了，小螺推出了一系列为促成交设计的活动（一元租房，公寓实力派，双十一，感恩节，双十二，抽奖，刷颜值换豪宅等等等等），无须让用户去选择update版本，<b>能快速迭代的web成为当之无愧的前锋</b>（所谓舍命狂奔大概是运营的一句“这个功能今晚要上哦”，狗带），这时候后台有人力写http接口让我们用php封装一层来用，到这里我对前后端分离有了新的认识，
<b>无论是php还是node，前端能把控请求和响应是开发体验上质的飞跃。</b>
当然掌控的越多责任也就越重，SEO优化，安全问题，权限，错误上报，数据上报等等等等都是要考虑的方方面面。

也会每天被同事黑...
> “php果然是最好的语言”
> “动态语言一时爽代码重构火葬场”
> “在线改bug泥们牛逼”




### 持续集成 自动化 nodejs 解放双手
> If something - anything - requires more than 90 seconds of his time, he writes a script to automate that.

这句话来自写[fucking-coffee.rb](https://github.com/NARKOZ/hacker-scripts)的coder的老同事,我想持续集成就是要<b>解决项目在构建，测试，发布的过程中那些繁复的工作</b>。
这里一定要夸一下我们机智的[neal酱](https://github.com/Neallin)和[frank酱](https://github.com/wanngxiao)，即时给测试同学一个最新的预览环境（git ci），一键推到预发布（hudson），秒切上线（.sh），听起来都觉得很不错吧。
还有把静态资源用gulp插件push上七牛的[Lred酱](https://github.com/fzred) 《＝ 超级佩服的一枚小鲜肉，可惜合作时间太短。
夸node也是从构建说起，gulp，sass，weinre...
gulp用在开发时 我最爱LiveReload即时预览 特别是码样式的时候
码样式呢 我最爱sass：变量 mixin 循环 函数。搭配 autofix 避免了很多重复的代码。
gulp用于生产环境，要把代码编译，打包，压缩，写sourcemap，加版本号，放到build目录对应文件夹下，静态资源上传到CDN，写manifest，修改文件引用....
是node让这个生态如此丰富，让各式各样的插件来帮我们做这些事情，解放双手。

```
		//贴一段最近写的sass,十个图标的雪碧图，展示时会有不同的组合
        @for $i from 1 through 10 {
            $j:(-1+$i)/3;
            .item#{$i} {
                background-position: (-63.5px*(($i+2)%3))-13px (-52px*floor($j))-5px;
            }
        }

```
效果图
![sample](http://cdn.zoeservers.com/screen_print01.png)


### 框架和架构

> 一个 架构师 构架了一个框架，约束框架使用者只能使用规定的结构来进行二次开发。

框架是一套解决方案，考虑基础环境成本和实际开发成本又满足需求解决的方案。
架构是一套设计方案，考虑性能，开发，维护。

前端的静态资源又多又杂，特别是多人共同开发时，文件的组织形式越规范后期维护起来也越是方便。

//模块化，CMD，require.js...todo

//使用iframe是出于jsp渲染时间较长易出现短暂的空白，为实现视觉上局部刷新而设，这里要对比一下两个java项目中的处理...todo

//对比一下小螺公寓管理系统的权限隔离设置和官网项目中对权限的处理...todo

### 工具TeamViewer xManager fiddler weinre

先上一个截图
![sample2](http://cdn.zoeservers.com/2015-12-27%2022.38.23.png)
公司的开发环境是win10，安装TeamViewer时要注意两边的版本保持一致，有了尔等神器，就不怕放假的时候有重大问题要赶回公司啦。
xManager里面最常用的是xShell跟xFTP,mac上的替代方案是iTerm跟FileZilla.
fiddler是相识恨晚，代理请求，过滤请求，文件映射都是最常用的操作，特别是需要微信认证的活动页，可启用代理用本地文件映射线上资源进行调试，十分方便。mac上的替代方案是Charles。
weinre 常用来调试mobile上的样式兼容。附一个[教程链接](http://www.tuicool.com/articles/mAzmq2)

### 后记

至此 前端这条路算是入了门，然而相比其它同龄开发，感觉差之甚远，只是停留在应用层面上，未及其构成，未研究算法，路还很长。