title: 使用MobileBone进行SPA单页面应用开发
date: 2015-12-28 01:15:51
tags: SPA
---
### BB ： 一切为了更好的体验

初次接触mobileBone，被其顺畅的切换效果俘虏，用来写“比一比”是再合适不过了。
比一比包含主页入口，比价页面，比价结果页，无结果页和第三方详情页面。
从左到右，无非是调一下接口，用arttemplate渲染一下，简单。
结果页有个两个小动画，分别是用css3的transition和setIntval,setTimeout控制Dom完成。
从右到左，后退时mobileBone写好了history，但问题在于刷新，结果页有一个推荐列表，后台pop出来的列表只能请求一次,若是在结果页刷新会出现空白或者只能让其跳到首页.
这样的体验不太好，neal酱提示做缓存，使用localStorage。
要求结果页和详情页需要做成可分享。
我只得在链接里面加上查询参数，从分享进来时去拉一下数据。
整个做完，感觉做了一些麻烦事，多余的开发，为何一开始不使用zxx推荐的另一方式直接请求页面呢。

总结一些基础关键点：路由，切换，history，localtorage


---

### 更新： SPA 各种各样的问题

说微信是移动端最大的浏览器是没错的，在实际业务中我们发现微信浏览器中的流量占比达到了98%，以下发现的绝大多数问题都是在微信浏览器中呈现的：

- 列表页->详情页 返回详情 恢复现场的问题
- 安卓中文件上传 长时间会假死 file.preview假地址
