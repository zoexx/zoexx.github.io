<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>zoe | blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="keywords" content="zoe zoexx coding zoexx.github.io">
  <meta name="baidu-site-verification" content="udDjGff8vn" />
  <meta name="description" content="just what u see">
<meta property="og:type" content="website">
<meta property="og:title" content="zoe | blog">
<meta property="og:url" content="http://zoexx.github.io/page/2/index.html">
<meta property="og:site_name" content="zoe | blog">
<meta property="og:description" content="just what u see">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="zoe | blog">
<meta name="twitter:description" content="just what u see">
  
    <link rel="alternative" href="/atom.xml" title="zoe | blog" type="application/atom+xml">
  
  
    <link rel="icon" href="https://cdn.zoeservers.com/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
    <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://cdn.zoeservers.com/myMarioBlue.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Zoe Ying</a></h1>
		</hgroup>

		
		<p class="header-subtitle">çå¨å¨</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>èœå•</li>
						<li>æ ‡ç­¾</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">ä¸»é¡µ</a></li>
				        
							<li><a href="/archives">æ‰€æœ‰æ–‡ç« </a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://zoexx.github.io/" title="github">github</a>
					        
								<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/SPA/" style="font-size: 10px;">SPA</a> <a href="/tags/flutter/" style="font-size: 10px;">flutter</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/git-git-flow/" style="font-size: 10px;">git git-flow</a> <a href="/tags/gulp/" style="font-size: 10px;">gulp</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/hybird/" style="font-size: 10px;">hybird</a> <a href="/tags/ideas/" style="font-size: 10px;">ideas</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/life/" style="font-size: 16.67px;">life</a> <a href="/tags/linux/" style="font-size: 13.33px;">linux</a> <a href="/tags/linux-dueros/" style="font-size: 10px;">linux dueros</a> <a href="/tags/mailchimp/" style="font-size: 10px;">mailchimp</a> <a href="/tags/mobile/" style="font-size: 10px;">mobile</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/php-wechat/" style="font-size: 10px;">php wechat</a> <a href="/tags/qshell-tool/" style="font-size: 10px;">qshell tool</a> <a href="/tags/raspberry/" style="font-size: 10px;">raspberry</a> <a href="/tags/tools/" style="font-size: 10px;">tools</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/wechat-å°ç¨‹åº/" style="font-size: 10px;">wechat å°ç¨‹åº</a> <a href="/tags/å¾®ä¿¡å°ç¨‹åº/" style="font-size: 10px;">å¾®ä¿¡å°ç¨‹åº</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Zoe Ying</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://cdn.zoeservers.com/myMarioBlue.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Zoe Ying</h1>
			</hgroup>
			
			<p class="header-subtitle">çå¨å¨</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">ä¸»é¡µ</a></li>
		        
					<li><a href="/archives">æ‰€æœ‰æ–‡ç« </a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://zoexx.github.io/" title="github">github</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-qshell-upload" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/12/29/qshell-upload/" class="article-date">
  	<time datetime="2017-12-29T08:26:38.000Z" itemprop="datePublished">2017-12-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/29/qshell-upload/">qshell_upload</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="ä½¿ç”¨qshellä¸Šä¼ èµ„æºåˆ°ä¸ƒç‰›"><a href="#ä½¿ç”¨qshellä¸Šä¼ èµ„æºåˆ°ä¸ƒç‰›" class="headerlink" title="ä½¿ç”¨qshellä¸Šä¼ èµ„æºåˆ°ä¸ƒç‰›"></a>ä½¿ç”¨qshellä¸Šä¼ èµ„æºåˆ°ä¸ƒç‰›</h1><h4 id="é¦–å…ˆä¸‹è½½qshell"><a href="#é¦–å…ˆä¸‹è½½qshell" class="headerlink" title="é¦–å…ˆä¸‹è½½qshell"></a>é¦–å…ˆ<a href="https://developer.qiniu.com/kodo/tools/1302/qshell#2" target="_blank" rel="external">ä¸‹è½½qshell</a></h4><h4 id="æ¥ç€-ç™»å½•è´¦æˆ·æ–‡æ¡£"><a href="#æ¥ç€-ç™»å½•è´¦æˆ·æ–‡æ¡£" class="headerlink" title="æ¥ç€ ç™»å½•è´¦æˆ·æ–‡æ¡£"></a>æ¥ç€ ç™»å½•è´¦æˆ·<a href="https://developer.qiniu.com/kodo/tools/1302/qshell#4" target="_blank" rel="external">æ–‡æ¡£</a></h4><h4 id="æ‰¹é‡ä¸Šä¼ åªéœ€è¦ç”¨åˆ°ä¸¤ä¸ªå‘½ä»¤-dircache-å’Œ-qupload"><a href="#æ‰¹é‡ä¸Šä¼ åªéœ€è¦ç”¨åˆ°ä¸¤ä¸ªå‘½ä»¤-dircache-å’Œ-qupload" class="headerlink" title="æ‰¹é‡ä¸Šä¼ åªéœ€è¦ç”¨åˆ°ä¸¤ä¸ªå‘½ä»¤ dircache  å’Œ qupload"></a>æ‰¹é‡ä¸Šä¼ åªéœ€è¦ç”¨åˆ°ä¸¤ä¸ªå‘½ä»¤ dircache  å’Œ qupload</h4><p><a href="https://github.com/qiniu/qshell/blob/master/docs/dircache.md" target="_blank" rel="external">dircache æ–‡æ¡£</a></p>
<p><a href="https://github.com/qiniu/qshell/blob/master/docs/qupload.md" target="_blank" rel="external">qupload æ–‡æ¡£</a></p>
<h4 id="ä¸¾ä¸ªğŸŒ°"><a href="#ä¸¾ä¸ªğŸŒ°" class="headerlink" title="ä¸¾ä¸ªğŸŒ°"></a>ä¸¾ä¸ªğŸŒ°</h4><p>ä»¥ä¸‹æ˜¯æˆ‘çš„æœ¬åœ°ç›®å½•ç»“æ„ï¼Œä½¿ç”¨å¤šä¸ªå¸å·å¯ä»¥æ ¹æ®å®˜æ–¹æ¨èçš„æ–¹æ³•åˆ†ç›®å½•å­˜æ”¾è´¦æˆ·ä¿¡æ¯</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">â”‚  file_list<span class="class">.txt</span></span><br><span class="line">â”‚  qshell<span class="class">.exe</span></span><br><span class="line">â”‚  success<span class="class">.txt</span></span><br><span class="line">â”‚  upload<span class="class">.conf</span></span><br><span class="line">â”‚  upload<span class="class">.log</span></span><br><span class="line">â”‚</span><br><span class="line">â””â”€ibt</span><br><span class="line">    â””â”€<span class="class">.qshell</span></span><br><span class="line">            account.json</span><br></pre></td></tr></table></figure>
<p>åˆ—ä¸¾æ–‡ä»¶</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qshell.exe dircache C:<span class="command">\Users</span><span class="command">\ibesteeth</span><span class="command">\Documents</span><span class="command">\www</span><span class="command">\public</span><span class="command">\activity</span><span class="command">\annual</span>_report file_list.txt</span><br></pre></td></tr></table></figure>
<p>é…ç½®ä¸Šä¼  <a href="https://github.com/qiniu/qshell/blob/master/docs/qupload.md#%E9%85%8D%E7%BD%AE" target="_blank" rel="external">é…ç½®æ–‡æ¡£</a></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">touch upload.conf</span><br><span class="line">vim upload.conf</span><br><span class="line">&#123;</span><br><span class="line">   <span class="string">"src_dir"</span>            :   <span class="string">"C:\\Users\\ibesteeth\\Documents\\www\\public\\activity\\annual_report"</span>,</span><br><span class="line">   <span class="string">"bucket"</span>             :   <span class="string">"webstatic"</span>,</span><br><span class="line">   <span class="string">"file_list"</span>          :   <span class="string">"C:\\Users\\ibesteeth\\Documents\\qshell\\file_list.txt"</span>,</span><br><span class="line">   <span class="string">"key_prefix"</span>         :   <span class="string">"activity/annual_report/"</span>,</span><br><span class="line">   <span class="string">"ignore_dir"</span>         :   <span class="literal">false</span>,</span><br><span class="line">   <span class="string">"overwrite"</span>          :   <span class="literal">true</span>,</span><br><span class="line">   <span class="string">"check_exists"</span>       :   <span class="literal">false</span>,</span><br><span class="line">   <span class="string">"check_hash"</span>         :   <span class="literal">false</span>,</span><br><span class="line">   <span class="string">"check_size"</span>         :   <span class="literal">false</span>,</span><br><span class="line">   <span class="string">"rescan_local"</span>       :   <span class="literal">true</span>,</span><br><span class="line">   <span class="string">"skip_suffixes"</span>      :   <span class="string">".DS_Store,.exe,.html,.db"</span>,</span><br><span class="line">   <span class="string">"log_file"</span>           :   <span class="string">"upload.log"</span>,</span><br><span class="line">   <span class="string">"log_level"</span>          :   <span class="string">"debug"</span>,</span><br><span class="line">   <span class="string">"log_rotate"</span>         :   <span class="number">1</span>,</span><br><span class="line">   <span class="string">"log_stdout"</span>         :   <span class="literal">true</span>,</span><br><span class="line">   <span class="string">"file_type"</span>          :   <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¼€å§‹ä¸Šä¼ </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qshell<span class="class">.exe</span> qupload -success-list success<span class="class">.txt</span> upload.conf</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/qshell-tool/">qshell tool</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-dueros-v1" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/12/05/dueros-v1/" class="article-date">
  	<time datetime="2017-12-05T02:54:30.000Z" itemprop="datePublished">2017-12-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/05/dueros-v1/">dueros_v1</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="è¿™æ˜¯ä¸€ç¯‡-2017-12-05-åœ¨dueroså¼€å‘è®ºå›è®°å½•çš„å¸–å­-æ¬è¿è¿‡æ¥"><a href="#è¿™æ˜¯ä¸€ç¯‡-2017-12-05-åœ¨dueroså¼€å‘è®ºå›è®°å½•çš„å¸–å­-æ¬è¿è¿‡æ¥" class="headerlink" title="è¿™æ˜¯ä¸€ç¯‡ 2017-12-05 åœ¨dueroså¼€å‘è®ºå›è®°å½•çš„å¸–å­ æ¬è¿è¿‡æ¥"></a>è¿™æ˜¯ä¸€ç¯‡ 2017-12-05 åœ¨dueroså¼€å‘è®ºå›è®°å½•çš„å¸–å­ æ¬è¿è¿‡æ¥</h4><p>â­â­â­â­ ç­‰äº†å¥½ä¹…ç­‰äº†å¥½ä¹…çš„ å¼€ ç®± â­â­â­â­</p>
<p><img src="http://boscdn.bpc.baidu.com/v1/developer/1512462305290081022.jpg" alt="1512462305290081022.jpg"></p>
<p><img src="http://boscdn.bpc.baidu.com/v1/developer/1512462319791021976.jpg" alt="1512462319791021976.jpg"></p>
<p>ç«‹å³ä¸‹å•çš„æ ‘è“æ´¾è·Ÿtfå¡ä¹Ÿåœ¨ç¬¬äºŒå¤©æ”¶åˆ°~~~~</p>
<p><img src="http://boscdn.bpc.baidu.com/v1/developer/1512462354443027445.jpg" alt="1512462354443027445.jpg"></p>
<p>åˆ·é•œåƒè¿™ä¸€æ­¥å°±ä¸å•°å—¦äº†ï¼Œè¯·å‚è€ƒ<a href="https://developer.dueros.baidu.com/doc/device-devkit/intro_markdown" target="_blank" rel="external">å®˜æ–¹è¯´æ˜</a>ã€‚</p>
<p>åˆ·å¥½é•œåƒä¹‹åæ”¹wifié…ç½®ï¼ˆæ­¤æ—¶ä¾ç„¶æ˜¯ç”¨ç”µè„‘æ‰“å¼€tfå¡çš„ç›®å½•ï¼‰ï¼š</p>
<ol>
<li>åœ¨tfå¡æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªsshæ–‡ä»¶</li>
<li>æ–°å»ºä¸€ä¸ªwpa_supplicant.confæ–‡ä»¶ï¼Œå¹¶åŠ å…¥wifié…ç½®</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">touchÂ ssh</span><br><span class="line">touchÂ wpa_supplicant.conf</span><br><span class="line">vimÂ wpa_supplicant.conf</span><br></pre></td></tr></table></figure>
<pre><code>ä»¥ä¸‹æ˜¯æ–‡ä»¶å†…å®¹ï¼š
</code></pre><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">country=GB&#10;ctrl_interface=DIR=/var/run/wpa_supplicant&#160;GROUP=netdev&#10;update_config=1&#10;network=&#123;&#10;&#160;&#160;&#160;&#160;ssid=&#34;wifi&#160;ssid&#34;&#10;&#160;&#160;&#160;&#160;psk=&#34;password&#34;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>å³å¯ã€‚</p>
<p>è£…å¡ï¼Œé€šç”µï¼Œæ‰¾ipã€‚</p>
<p>ipå¯ä»¥ç™»å½•è·¯ç”±å™¨çš„ç®¡ç†é¡µé¢å»æ‰¾ï¼Œ</p>
<p>å¦‚æœï¼Œæœ‰äººè·Ÿæˆ‘ä¸€æ ·ï¼Œ</p>
<p>æ²¡æœ‰ç®¡ç†å¸å·ï¼Œé‚£ä¹ˆï¼Œå¯ä»¥ç”¨ipscanæ¥æ‰¾ä¸€æ‰¾ã€‚</p>
<p>çŒ®ä¸Šè½¯ä»¶</p>
<p>é“¾æ¥: <a href="https://pan.baidu.com/s/1i51UCN7" target="_blank" rel="external">https://pan.baidu.com/s/1i51UCN7</a> å¯†ç : kr4n</p>
<p>æ‰«æä¸€ä¸‹å±€åŸŸç½‘å†…çš„ipï¼Œæ‰¾æ‰¾æœ‰åŒ…å«raspberry,linuxä¹‹ç±»å­—æ ·çš„ï¼Œ</p>
<p>å¦‚æœï¼Œæœ‰äººè·Ÿæˆ‘ä¸€æ ·ï¼Œ</p>
<p>æ²¡æœ‰æ‰¾åˆ°ä»»ä½•ç‰¹å¾ã€‚</p>
<p><img src="http://boscdn.bpc.baidu.com/v1/developer/1512462040931003322.png" alt="1512462040931003322.png"></p>
<p>é‚£ä¹ˆå°±ç”¨æ’é™¤æ³•å§ï¼</p>
<p>ç­›é€‰ä¹‹åï¼Œæˆ‘è¿™è¾¹å‰©ä½™19ä¸ªæ²¡æœ‰ä»»ä½•ç‰¹å¾çš„ipï¼Œä¸€ä¸ªä¸€ä¸ªsshè¿‡å»ï¼Œ(â”¬ï¼¿â”¬)</p>
<p><img src="http://boscdn.bpc.baidu.com/v1/developer/1512462057540082439.png" alt="1512462057540082439.png"></p>
<p>å¥½æ­¹æ˜¯æ‰¾åˆ°äº†ã€‚</p>
<p>ç”¨topè§‚å¯Ÿä¸€ä¸‹ä¸‹ï¼Œduerosè·‘çš„å¾ˆå®‰é€¸ã€‚</p>
<p><img src="http://boscdn.bpc.baidu.com/v1/developer/1512462067106027182.png" alt="1512462067106027182.png"></p>
<p>ä¸­åˆåƒå®Œåˆé¥­å›æ¥ï¼Œæ‘¸æ‘¸piçš„cpuï¼Œå—¯ï¼Œè¿˜æ˜¯æŒºæ¸©æš–çš„ã€‚</p>
<p>æ‹”ç”µæºï¼Œè¿æ¥ä¸Šæ¿å­ï¼Œç»™ç”µï¼Œå°åº¦æ¸©æŸ”çš„å£°éŸ³å‡ºæ¥å•¦</p>
<p>â€œå°åº¦æ­£åœ¨å¯åŠ¨è¯·ç¨å€™â€¦â€</p>
<p>â€œå¯åŠ¨æˆåŠŸ~â€</p>
<p>â€œå°åº¦å°åº¦~â€</p>
<p>â€œâ€¦â€</p>
<p>â€œå°åº¦å°åº¦ ?â€</p>
<p>â€œâ€¦..â€</p>
<p>â€œå°åº¦å°åº¦ !â€</p>
<p>â€œâ€¦..â€</p>
<p>æœ€æ€•ç©ºæ°”çªç„¶å®‰é™â€¦..</p>
<p>æŸ¥çœ‹ä¸€ä¸‹æ—¥å¿—</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tailÂ <span class="operator">-f</span>Â /duer/duer_linux.log</span><br></pre></td></tr></table></figure>
<p>æœç„¶æ˜¯æŠ¥é”™äº†â€¦â€¦</p>
<p><img src="http://boscdn.bpc.baidu.com/v1/developer/1512462125923052655.png" alt="1512462125923052655.png"></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Can&#39;t open &#34;plughw:1,0&#34; PCM device. No such file or directory</span><br></pre></td></tr></table></figure>
<p>çœ‹ä¸Šå»å¥½åƒæ˜¯æ‰¾ä¸åˆ°ä»€ä¹ˆè®¾å¤‡ï¼Œæ€€ç–‘æ¯ä¸€æ ¹é“¾æ¥çº¿</p>
<p>ç«‹å³åœ¨ç¾¤é‡Œè¯¢é—®</p>
<p>ç»ç¾¤é‡Œçš„å°ä¼™ä¼´æç¤ºï¼Œæ¢äº†æ ¹micro usbçº¿ï¼Œå³å¯æ­£å¸¸è¿è¡Œã€‚</p>
<p>ï¼ˆä¹‹å‰ç”¨çš„æ˜¯ä¸€æ ¹ç»™è®¾å¤‡å……ç”µçš„çŸ­çº¿ï¼‰</p>
<p>è¿™ä¸ªPCM deviceæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼ŒPCMæ˜¯pulse code modulationï¼Œä¸­æ–‡è¯‘åæ˜¯è„‰å†²ç¼–ç è°ƒåˆ¶ã€‚åœ¨è¿™é‡Œæˆ‘ç†è§£ä¸ºå½•éŸ³å’Œæ’­æ”¾éŸ³é¢‘çš„è®¾å¤‡ï¼ˆæ¨¡æ‹Ÿä¿¡å·å’Œæ•°å­—ä¿¡å·ä¹‹é—´çš„è½¬æ¢ï¼‰ï¼Œå¦‚æœ‰é”™è¯¯å¤§å®¶æŒ‡å‡ºã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€ç¯‡æ–‡ç« ä»‹ç»<a href="http://blog.csdn.net/junglyfine/article/details/8665589" target="_blank" rel="external">PCMæ˜¯ä»€ä¹ˆ</a></p>
<p><img src="http://boscdn.bpc.baidu.com/v1/developer/1512462153975069787.png" alt="1512462153975069787.png"></p>
<p><img src="http://boscdn.bpc.baidu.com/v1/developer/1512462181885004181.png" alt="1512462181885004181.png"></p>
<p>((ìœ âˆ€ìœ |||)) å¥½åƒæˆ‘å¹¶æ²¡æœ‰å‘µå‘µå‘µçš„å‚»ç¬‘æ˜‚</p>
<p>è¿™é‡Œä¹Ÿå¯ä»¥çœ‹åˆ°è¯­éŸ³è¯†åˆ«çš„è¿”å›ä¿¡æ¯ï¼ˆæ‘Šæ‰‹ï¼‰ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[App-INFO&#160;]-[2017-12-05&#160;15:17:32.161]-----Duer&#160;server&#160;data:&#123;&#10;&#160;&#160;&#160;&#34;client_msg_id&#34;&#160;:&#160;&#34;aee7c92d-0b63-4283-b80f-940e6beec458&#34;,&#10;&#160;&#160;&#160;&#34;cuid&#34;&#160;:&#160;&#34;7b4ac26c65ac73db4f30f334ac80b013&#34;,&#10;&#160;&#160;&#160;&#34;id&#34;&#160;:&#160;&#34;1512458252_136cskpp6&#34;,&#10;&#160;&#160;&#160;&#34;idx&#34;&#160;:&#160;4,&#10;&#160;&#160;&#160;&#34;logid&#34;&#160;:&#160;&#34;15124582511915&#34;,&#10;&#160;&#160;&#160;&#34;msg&#34;&#160;:&#160;&#34;ok&#34;,&#10;&#160;&#160;&#160;&#34;result&#34;&#160;:&#160;&#123;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#34;bot_id&#34;&#160;:&#160;&#34;talk_service&#34;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#34;bot_meta&#34;&#160;:&#160;&#123;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;description&#34;&#160;:&#160;&#34;desc&#34;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;type&#34;&#160;:&#160;&#34;&#20854;&#20182;&#34;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;version&#34;&#160;:&#160;&#34;1.0.0&#34;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#125;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#34;directives&#34;&#160;:&#160;[&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#123;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;header&#34;&#160;:&#160;&#123;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;dialogRequestId&#34;&#160;:&#160;&#34;aee7c92d-0b63-4283-b80f-940e6beec458&#34;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;name&#34;&#160;:&#160;&#34;Speak&#34;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;namespace&#34;&#160;:&#160;&#34;SpeechSynthesizer&#34;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#125;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;payload&#34;&#160;:&#160;&#123;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;content&#34;&#160;:&#160;[&#160;&#34;&#21621;&#21621;&#21621;&#30340;&#20667;&#31505;&#12290;&#21621;&#21621;&#21621;&#30340;&#20667;&#31505;&#34;&#160;],&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;speak_behavior&#34;&#160;:&#160;&#34;REPLACE_ALL&#34;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;token&#34;&#160;:&#160;&#34;1512458252_123fr0kcl&#34;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;type&#34;&#160;:&#160;&#34;Text&#34;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#125;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#125;&#10;&#160;&#160;&#160;&#160;&#160;&#160;],&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#34;display&#34;&#160;:&#160;&#123;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;id&#34;&#160;:&#160;&#34;af9b0b03baa4665c7bb8002327edcf65&#34;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;url&#34;&#160;:&#160;&#34;http://xiaodu.baidu.com/saiya/dcsview?id=af9b0b03baa4665c7bb8002327edcf65&#38;appid=dmB3C032D9FD3E4899&#34;;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#125;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#34;nlu&#34;&#160;:&#160;&#123;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;domain&#34;&#160;:&#160;&#34;unknown&#34;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;intent&#34;&#160;:&#160;&#34;unknown&#34;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;slots&#34;&#160;:&#160;&#123;&#125;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#125;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#34;speech&#34;&#160;:&#160;&#123;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;content&#34;&#160;:&#160;&#34;&#21621;&#21621;&#21621;&#30340;&#20667;&#31505;&#12290;&#21621;&#21621;&#21621;&#30340;&#20667;&#31505;&#34;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;type&#34;&#160;:&#160;&#34;Text&#34;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#125;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#34;views&#34;&#160;:&#160;[&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#123;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;content&#34;&#160;:&#160;&#34;&#21621;&#21621;&#21621;&#30340;&#20667;&#31505;&#34;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;type&#34;&#160;:&#160;&#34;txt&#34;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#125;,&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#123;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;list&#34;&#160;:&#160;[&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#123;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;src&#34;&#160;:&#160;&#34;https://ss3.baidu.com/-fo3dSag_xI4khGko9WTAnF6hhy/xiaodu/pic/item/d1160924ab18972be2049786eecd7b899e510abb.jpg&#34;;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#125;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;],&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#34;type&#34;&#160;:&#160;&#34;image&#34;&#10;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#125;&#10;&#160;&#160;&#160;&#160;&#160;&#160;]&#10;&#160;&#160;&#160;&#125;,&#10;&#160;&#160;&#160;&#34;se_query&#34;&#160;:&#160;&#34;&#21621;&#21621;&#21621;&#21621;&#21621;&#21621;&#21621;&#21621;&#21621;&#21621;&#21621;&#21621;&#34;,&#10;&#160;&#160;&#160;&#34;session_id&#34;&#160;:&#160;&#34;86dc7a52-cb5d-4448-b9b4-f7610fd278bc&#34;,&#10;&#160;&#160;&#160;&#34;speech_id&#34;&#160;:&#160;&#34;6495958712883389696&#34;,&#10;&#160;&#160;&#160;&#34;status&#34;&#160;:&#160;0,&#10;&#160;&#160;&#160;&#34;time&#34;&#160;:&#160;1512458252,&#10;&#160;&#160;&#160;&#34;timeuse&#34;&#160;:&#160;748,&#10;&#160;&#160;&#160;&#34;user_id&#34;&#160;:&#160;&#34;7b4ac26c65ac73db4f30f334ac80b013&#34;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>okayï¼Œä¸‹ä¸€æ­¥æ˜¯ç”¨pythonSDKä¿®æ”¹å”¤è¯ã€‚</p>
<p>è¡¥å……ä¸‰ä¸ªæŒ‡ä»¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop duer</span><br><span class="line">sudo systemctl start duer</span><br><span class="line">sudo systemctl <span class="built_in">disable</span> duer</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> duer</span><br></pre></td></tr></table></figure>
<p>Ps:</p>
<p>çœ‹è¿‡ã€Šherã€‹ä¹‹åä¸€ç›´å¯¹Samanthaæ‹æ‹ä¸å¿˜å‘¢ã€‚</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux-dueros/">linux dueros</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-funnyCommandInLinux" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/28/funnyCommandInLinux/" class="article-date">
  	<time datetime="2017-11-28T08:26:21.000Z" itemprop="datePublished">2017-11-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/28/funnyCommandInLinux/">æœ‰è¶£çš„linuxï¼ˆDebianï¼‰å‘½ä»¤</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="æœ¬-APT-å…·æœ‰è¶…çº§ç‰›åŠ›æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ"><a href="#æœ¬-APT-å…·æœ‰è¶…çº§ç‰›åŠ›æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ" class="headerlink" title="æœ¬ APT å…·æœ‰è¶…çº§ç‰›åŠ›æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ"></a>æœ¬ APT å…·æœ‰è¶…çº§ç‰›åŠ›æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ</h2><blockquote>
<p> apt-get is the command-line tool for handling packages, and may be considered the userâ€™s â€œback-endâ€ to other tools using the APT library. Several â€œfront-endâ€ interfaces exist, such as aptitude(8), synaptic(8) and wajig(1).</p>
</blockquote>
<p>ç»™ç³»ç»Ÿåšäº†æ±‰åŒ–ä¹‹åï¼ŒSeanå‘ç°æ‰§è¡Œapt-getå‘½ä»¤æ—¶ï¼Œcommandè¯´æ˜çš„æœ€åä¸€è¡Œå‡ºç°äº†â€œæœ¬ APT å…·æœ‰è¶…çº§ç‰›åŠ›â€ã€‚è‹±æ–‡æ˜¯â€This APT has Super Cow Powers.â€ã€‚</p>
<p><img src="http://cdn.zoeservers.com/blog/apt_20171128163821.png" alt="æœ¬ APT å…·æœ‰è¶…çº§ç‰›åŠ›"></p>
<p>æœ‰è¶£çš„æ˜¯<a href="https://baike.baidu.com/item/aptitude/6849487?fr=aladdin" target="_blank" rel="external">aptitude</a>çš„è¯´æ˜ä¸­ä¹Ÿå‡ºç°äº†ç‰›åŠ›ã€‚</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ aptitude <span class="comment">--help</span></span><br></pre></td></tr></table></figure>
<p>â€œè¿™ä¸ª aptitude æ²¡æœ‰è¶…çº§ç‰›åŠ›ã€‚â€</p>
<p>â€œThis aptitude does not have Super Cow Powers.â€</p>
<p>å¥½å§ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘å…¶å®ä¹Ÿæœ‰ç”¨è¿‡ä¸€ä¸ªæœ‰è¶£çš„å°å‘½ä»¤ï¼Œå« cowsay ã€‚</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pi<span class="comment">@raspberrypi:~ $ cowsay hello world</span></span><br><span class="line"> _____________</span><br><span class="line"><span class="variable">&lt; hello world &gt;</span></span><br><span class="line"> -------------</span><br><span class="line">        \   ^__^</span><br><span class="line">         \  (oo)\_______</span><br><span class="line">            (__)\       )\/\</span><br><span class="line">                ||<span class="string">----w </span>|</span><br><span class="line">                ||<span class="string">     </span>||</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿™ä¸€å †ç¨‹åºå‘˜è¿™ä¹ˆåçˆ±ç‰›å‘¢ï¼ŸğŸ®ğŸ®ğŸ®ğŸ®</p>
<h4 id="Whatâ€™s-the-story-behind-Super-Cow-Powers"><a href="#Whatâ€™s-the-story-behind-Super-Cow-Powers" class="headerlink" title="Whatâ€™s the story behind Super Cow Powers?"></a>Whatâ€™s the story behind Super Cow Powers?</h4><blockquote>
<p>Apt started its life around 1997 and entered Debian officially around 1999. During its early days, Jason Gunthorpe was its main maintainer/developer. Well, apparently Jason liked cows. I donâ€™t know if he still does. :-) Anyway, I think the apt-get moo thing was added by him as a joke. The corresponding aptitude easter eggs (see below) were added later by Daniel Burrows as a homage, I think.</p>
</blockquote>
<blockquote>
<p>If there is more to the story, Jason is probably the person to ask. He has (likely in response to this question) written a post on Google+. A small bit of it:</p>
</blockquote>
<blockquote>
<blockquote>
<p>Once a long time ago a developer was known for announcing his presence on IRC with a simple, to the point â€˜Mooâ€™. As with cows in pasture others would often Moo back in greeting. This led to a certain range of cow based jokes.</p>
</blockquote>
</blockquote>
<p>ä»¥ä¸Šæ˜¯æ¥è‡ª<a href="https://unix.stackexchange.com/questions/92185/whats-the-story-behind-super-cow-powers" target="_blank" rel="external">unix.stackexchange.com</a>çš„é«˜ç¥¨å›ç­”ã€‚</p>
<p>å¼ï¼ŒåŸæ¥æ˜¯<a href="https://baike.baidu.com/item/IRC/10410?fr=aladdin" target="_blank" rel="external">IRC</a>( Internet Relay Chat )æ—¶ä»£çš„æ•…äº‹ã€‚</p>
<p>è„‘è¡¥å¯¹è¯:</p>
<ul>
<li>zoe: moo.    </li>
<li><small>( anyone else? )</small></li>
<li>sean: moo~   </li>
<li><small>( yes,here. )</small></li>
<li>della: moo~  </li>
<li><small>( here I am. )</small></li>
</ul>
<h4 id="æ›´å¤šç‰›åŠ›è¯·å°è¯•ğŸ‘‡"><a href="#æ›´å¤šç‰›åŠ›è¯·å°è¯•ğŸ‘‡" class="headerlink" title="æ›´å¤šç‰›åŠ›è¯·å°è¯•ğŸ‘‡"></a>æ›´å¤šç‰›åŠ›è¯·å°è¯•ğŸ‘‡</h4><p>ä¸‡åœ£èŠ‚å½©è›‹ï¼Ÿ<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>aptitude moo</span><br><span class="line"><span class="variable">$ </span>aptitude -v moo</span><br><span class="line"><span class="variable">$ </span>aptitude -vv moo</span><br><span class="line"><span class="variable">$ </span>aptitude -vvv moo</span><br><span class="line"><span class="variable">$ </span>aptitude -vvvv moo</span><br><span class="line"><span class="variable">$ </span>aptitude -vvvvv moo</span><br><span class="line"><span class="variable">$ </span>aptitude -vvvvvv moo</span><br></pre></td></tr></table></figure></p>
<p>Have you mooed today?<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ apt-<span class="keyword">get</span> moo</span><br><span class="line">$ apt-<span class="keyword">get</span> moo moo</span><br><span class="line">$ apt-<span class="keyword">get</span> moo moo moo</span><br></pre></td></tr></table></figure></p>
<p>å…¶å®cowsayä¸ä»…ä»…ğŸ®sayï¼Œè¿˜æœ‰å¾ˆå¤šå°åŠ¨ç‰©<br>Show all available cows<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">for</span> i <span class="keyword">in</span> /usr/share/cowsay/cows/*.cow; <span class="keyword">do</span> cowsay <span class="operator">-f</span> <span class="variable">$i</span> <span class="string">"<span class="variable">$i</span>"</span>; <span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>
<h4 id="å…¶å®ƒæœ‰è¶£çš„å‘½ä»¤ï¼ˆæœ‰ä¸€äº›æ˜¯æ²¡æœ‰æ‰“åŒ…åœ¨ç³»ç»Ÿä¸­çš„éœ€è¦æ‰‹åŠ¨è£…ä¸€ä¸‹ï¼Œapt-get-install-in-Debianï¼‰"><a href="#å…¶å®ƒæœ‰è¶£çš„å‘½ä»¤ï¼ˆæœ‰ä¸€äº›æ˜¯æ²¡æœ‰æ‰“åŒ…åœ¨ç³»ç»Ÿä¸­çš„éœ€è¦æ‰‹åŠ¨è£…ä¸€ä¸‹ï¼Œapt-get-install-in-Debianï¼‰" class="headerlink" title="å…¶å®ƒæœ‰è¶£çš„å‘½ä»¤ï¼ˆæœ‰ä¸€äº›æ˜¯æ²¡æœ‰æ‰“åŒ…åœ¨ç³»ç»Ÿä¸­çš„éœ€è¦æ‰‹åŠ¨è£…ä¸€ä¸‹ï¼Œapt-get install in Debianï¼‰"></a>å…¶å®ƒæœ‰è¶£çš„å‘½ä»¤ï¼ˆæœ‰ä¸€äº›æ˜¯æ²¡æœ‰æ‰“åŒ…åœ¨ç³»ç»Ÿä¸­çš„éœ€è¦æ‰‹åŠ¨è£…ä¸€ä¸‹ï¼Œapt-get install in Debianï¼‰</h4><h5 id="1-slå¤§å®¶åº”è¯¥éƒ½çŸ¥é“ï¼Œæ‰‹è¯¯çš„æ—¶å€™å¯ä»¥çœ‹ç«è½¦å‘œå‘œå‘œçš„ç»è¿‡"><a href="#1-slå¤§å®¶åº”è¯¥éƒ½çŸ¥é“ï¼Œæ‰‹è¯¯çš„æ—¶å€™å¯ä»¥çœ‹ç«è½¦å‘œå‘œå‘œçš„ç»è¿‡" class="headerlink" title="1. slå¤§å®¶åº”è¯¥éƒ½çŸ¥é“ï¼Œæ‰‹è¯¯çš„æ—¶å€™å¯ä»¥çœ‹ç«è½¦å‘œå‘œå‘œçš„ç»è¿‡"></a>1. slå¤§å®¶åº”è¯¥éƒ½çŸ¥é“ï¼Œæ‰‹è¯¯çš„æ—¶å€™å¯ä»¥çœ‹ç«è½¦å‘œå‘œå‘œçš„ç»è¿‡</h5><h5 id="2-cmatrix-å±ä¿-ğŸ™‚-é»‘å®¢å¸å›½çš„å¤§é—¨ä¸ºä½ æ‰“å¼€ï¼ˆå‡è£…ï¼‰"><a href="#2-cmatrix-å±ä¿-ğŸ™‚-é»‘å®¢å¸å›½çš„å¤§é—¨ä¸ºä½ æ‰“å¼€ï¼ˆå‡è£…ï¼‰" class="headerlink" title="2. cmatrix å±ä¿ ğŸ™‚ é»‘å®¢å¸å›½çš„å¤§é—¨ä¸ºä½ æ‰“å¼€ï¼ˆå‡è£…ï¼‰"></a>2. cmatrix å±ä¿ ğŸ™‚ é»‘å®¢å¸å›½çš„å¤§é—¨ä¸ºä½ æ‰“å¼€ï¼ˆå‡è£…ï¼‰</h5><h5 id="3-fortune"><a href="#3-fortune" class="headerlink" title="3. fortune"></a>3. fortune</h5><p>ç¾å›½ä¸­é¤é¦†çš„æœ€åä¸€é“èœï¼Œå¾€å¾€æ˜¯å°ç”œé¥¼ï¼Œå«åšâ€å¹¸è¿é¥¼â€ï¼ˆfortune cookieï¼‰ã€‚é‡Œé¢æœ‰ä¸€å¼ çº¸æ¡ï¼Œå†™ç€äººç”Ÿæ ¼è¨€ã€‚</p>
<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1512466632&amp;di=b22654281d39ca66b2085d11de46b2aa&amp;imgtype=jpg&amp;er=1&amp;src=http%3A%2F%2Ffarm1.staticflickr.com%2F53%2F120157809_d3a7ee3718.jpg" alt="fortune cookie"></p>
<p>è¿™ç§å½¢å¼çš„æ ¼è¨€éå¸¸å—æ¬¢è¿ï¼Œ1979å¹´ï¼Œå°±æœ‰äººå†™äº†ä¸€ä¸ªå«åš fortune çš„å°ç¨‹åºã€‚æ¯ä¸€æ¬¡æ‰§è¡Œéƒ½å¯ä»¥å¾—åˆ°ä¸€æ¡éšæœºçš„æ ¼è¨€/æ•…äº‹ã€‚</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="constant">pi</span>@raspberrypi:~ $ fortune</span><br><span class="line">If one cannot enjoy reading a book <span class="keyword">over</span> <span class="keyword">and</span> <span class="keyword">over</span> again, there <span class="keyword">is</span> no use</span><br><span class="line"><span class="keyword">in</span> reading <span class="keyword">it</span> <span class="keyword">at</span> all.</span><br><span class="line">		<span class="comment">-- Oscar Wilde</span></span><br></pre></td></tr></table></figure>
<p>è¿˜æœ‰ä¸­æ–‡ç‰ˆçš„ fortune-zh ã€‚</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi<span class="variable">@raspberrypi</span><span class="symbol">:~</span> <span class="variable">$ </span>fortune-zh</span><br><span class="line">ã€Šèµ å†…äººã€‹</span><br><span class="line">ä½œè€…ï¼šå¼ ç¥œ</span><br><span class="line">ç¦é—¨å®«æ ‘æœˆç—•è¿‡ï¼Œåªšçœ¼æƒŸçœ‹å®¿é¹­å·¢ã€‚</span><br><span class="line">æ–œæ‹”ç‰é’—ç¯å½±ç•”ï¼Œå‰”å¼€çº¢ç„°æ•‘é£è›¾ã€‚</span><br></pre></td></tr></table></figure>
<p>use fortune with cowsay ~</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">pi<span class="property">@raspberrypi</span>:~ $ fortune | cowsay</span><br><span class="line"> ________________________________________</span><br><span class="line">/ My only love sprung <span class="keyword">from</span> my only hate! <span class="string">\</span></span><br><span class="line">| Too early seen unknown, <span class="keyword">and</span> known too  |</span><br><span class="line">| late!                                  |</span><br><span class="line">|                                        |</span><br><span class="line">| -- William Shakespeare, <span class="string">"Romeo and     |</span><br><span class="line">\ Juliet"</span>                                /</span><br><span class="line"> ----------------------------------------</span><br><span class="line">        <span class="string">\</span>   ^__^</span><br><span class="line">         <span class="string">\</span>  (oo)<span class="string">\_______</span></span><br><span class="line">            (__)<span class="string">\</span>       )<span class="string">\/\</span></span><br><span class="line">                ||----w |</span><br><span class="line">                ||     ||</span><br></pre></td></tr></table></figure>
<p>Have a random â€œcowâ€ say a random thing<br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">pi@raspberrypi:~ $ fortune <span class="string">| cowsay -f $(ls /usr/share/cowsay/cows/ | shuf -n1)</span></span><br><span class="line"> ________________________________________</span><br><span class="line">/ It is a wise father that knows his own \</span><br><span class="line"><span class="string">| child.                                 |</span></span><br><span class="line"><span class="string">|                                        |</span></span><br><span class="line"><span class="string">| -- William Shakespeare, "</span>The Merchant  <span class="string">|</span></span><br><span class="line">\ of Venice<span class="string">"                             /</span></span><br><span class="line"> ----------------------------------------</span><br><span class="line"> \     /\  ___  /\</span><br><span class="line">  \   <span class="comment">// \/   \/ \\</span></span><br><span class="line">     ((    O O    ))</span><br><span class="line">      \\ /     \ <span class="comment">//</span></span><br><span class="line">       \/  <span class="string">| |  \/ </span></span><br><span class="line">        <span class="string">|  | |  |  </span></span><br><span class="line">        <span class="string">|  | |  |  </span></span><br><span class="line">        <span class="string">|   o   |  </span></span><br><span class="line">        <span class="string">| |   | |  </span></span><br><span class="line">        <span class="string">|m|   |m|</span></span><br></pre></td></tr></table></figure></p>
<h5 id="4-ddate"><a href="#4-ddate" class="headerlink" title="4. ddate"></a>4. ddate</h5><blockquote>
<p>ddate prints the date in Discordian date format.</p>
</blockquote>
<p>æ˜¯å¦åŒå€¦äº†åƒç™¾å¹´ä¸å˜çš„<a href="https://en.wikipedia.org/wiki/Gregorian_calendar" target="_blank" rel="external"> Gregorian Calendarï¼ˆç½—é©¬æ•™å†ï¼‰</a>ï¼Ÿå‡†å¤‡å¥½ä¹±å…¥äº†å—ï¼Ÿè¯•è¯•è¾“å…¥â€œddateâ€ã€‚è¿™æ ·ä¼šæŠŠå½“å‰æ—¥å†ä»¥<a href="https://en.wikipedia.org/wiki/Discordian_calendar" target="_blank" rel="external">Discordian Calendarï¼ˆä¸å’Œæ•™å†ï¼‰</a>çš„æ–¹å¼æ˜¾ç¤ºå‡ºæ¥ã€‚ä½ ä¼šé‡è§è¿™æ ·çš„è¯­å¥ï¼š</p>
<p>â€œä»Šå¤©æ˜¯Sweetmornï¼ˆç”œç¾çš„æ¸…æ™¨ï¼‰ï¼Œ3181å¹´Discordï¼ˆä¸å’Œï¼‰å­£çš„ç¬¬18å¤©ã€‚â€</p>
<h5 id="5-adventure-æ–‡å­—å†’é™©æ¸¸æˆ"><a href="#5-adventure-æ–‡å­—å†’é™©æ¸¸æˆ" class="headerlink" title="5. adventure æ–‡å­—å†’é™©æ¸¸æˆ"></a>5. adventure æ–‡å­—å†’é™©æ¸¸æˆ</h5><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="constant">pi</span>@raspberrypi:~ $ adventure </span><br><span class="line"></span><br><span class="line">Welcome <span class="keyword">to</span> Adventure!!  Would you like instructions?</span><br><span class="line">yes</span><br><span class="line"></span><br><span class="line">Somewhere nearby <span class="keyword">is</span> Colossal Cave, <span class="keyword">where</span> others have found fortunes <span class="keyword">in</span></span><br><span class="line">treasure <span class="keyword">and</span> gold, though <span class="keyword">it</span> <span class="keyword">is</span> rumored <span class="keyword">that</span> <span class="keyword">some</span> who enter are never</span><br><span class="line">seen again.  Magic <span class="keyword">is</span> said <span class="keyword">to</span> work <span class="keyword">in</span> <span class="keyword">the</span> cave.  I will be your eyes</span><br><span class="line"><span class="keyword">and</span> hands.  Direct <span class="keyword">me</span> <span class="keyword">with</span> commands <span class="keyword">of</span> <span class="number">1</span> <span class="keyword">or</span> <span class="number">2</span> <span class="property">words</span>.  I should warn</span><br><span class="line">you <span class="keyword">that</span> I look <span class="keyword">at</span> only <span class="keyword">the</span> <span class="keyword">first</span> five letters <span class="keyword">of</span> each <span class="property">word</span>, so you'll</span><br><span class="line">have <span class="keyword">to</span> enter <span class="string">"northeast"</span> <span class="keyword">as</span> <span class="string">"ne"</span> <span class="keyword">to</span> distinguish <span class="keyword">it</span> <span class="keyword">from</span> <span class="string">"north"</span>.</span><br><span class="line">(Should you <span class="keyword">get</span> stuck, type <span class="string">"help"</span> <span class="keyword">for</span> <span class="keyword">some</span> general hints.  For</span><br><span class="line">information <span class="function_start"><span class="keyword">on</span></span> how <span class="keyword">to</span> <span class="keyword">end</span> your adventure, etc., type <span class="string">"info"</span>.)</span><br><span class="line">			      - - -</span><br><span class="line">This program was originally developed <span class="keyword">by</span> Will Crowther.  Most <span class="keyword">of</span> <span class="keyword">the</span></span><br><span class="line">features <span class="keyword">of</span> <span class="keyword">the</span> current program were added <span class="keyword">by</span> Don Woods.  Address</span><br><span class="line">complaints <span class="keyword">about</span> <span class="keyword">the</span> UNIX <span class="property">version</span> <span class="keyword">to</span> Jim Gillogly (jim@rand.org).</span><br><span class="line"></span><br><span class="line">You are standing <span class="keyword">at</span> <span class="keyword">the</span> <span class="keyword">end</span> <span class="keyword">of</span> a road <span class="keyword">before</span> a small brick building.</span><br><span class="line">Around you <span class="keyword">is</span> a forest.  A small stream flows <span class="keyword">out of</span> <span class="keyword">the</span> building <span class="keyword">and</span></span><br><span class="line">down a gully.</span><br><span class="line">up</span><br><span class="line"></span><br><span class="line">You have walked up a hill, still <span class="keyword">in</span> <span class="keyword">the</span> forest.  The road slopes <span class="keyword">back</span></span><br><span class="line">down <span class="keyword">the</span> other side <span class="keyword">of</span> <span class="keyword">the</span> hill.  There <span class="keyword">is</span> a building <span class="keyword">in</span> <span class="keyword">the</span> distance.</span><br><span class="line">.......</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ¸¸æˆå¯ä»¥é€šè¿‡å®‰è£… bsdgames å¾—åˆ°ã€‚<a href="http://wiki.linuxquestions.org/wiki/BSD_games" target="_blank" rel="external">bsdgames</a>åŒ…å«äº†adventureå’Œå…¶å®ƒç»å…¸æ–‡å­—æ¸¸æˆï¼Œéƒ½å¯ä»¥å°è¯•ä¸€ä¸‹å“¦ã€‚</p>
<p>éƒ½åœ¨ /usr/games/ ç›®å½•é‡Œã€‚</p>
<h3 id="æ›´å¤šæ›´å¤šæœ‰è¶£-amp-å®ç”¨çš„å‘½ä»¤ğŸ‘‰http-www-commandlinefu-com"><a href="#æ›´å¤šæ›´å¤šæœ‰è¶£-amp-å®ç”¨çš„å‘½ä»¤ğŸ‘‰http-www-commandlinefu-com" class="headerlink" title="æ›´å¤šæ›´å¤šæœ‰è¶£&amp;å®ç”¨çš„å‘½ä»¤ğŸ‘‰http://www.commandlinefu.com"></a>æ›´å¤šæ›´å¤šæœ‰è¶£&amp;å®ç”¨çš„å‘½ä»¤ğŸ‘‰<a href="http://www.commandlinefu.com" target="_blank" rel="external">http://www.commandlinefu.com</a></h3>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-wechat-app-and-wechat-subscription" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/15/wechat-app-and-wechat-subscription/" class="article-date">
  	<time datetime="2017-09-15T02:56:15.000Z" itemprop="datePublished">2017-09-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/15/wechat-app-and-wechat-subscription/">å°ç¨‹åºç»‘å®šå¾®ä¿¡å…¬ä¼—å·ä¹‹åçš„èƒ½åŠ›</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å…¬ä¼—å·çš„è¿æ¥èƒ½åŠ›"><a href="#å…¬ä¼—å·çš„è¿æ¥èƒ½åŠ›" class="headerlink" title="å…¬ä¼—å·çš„è¿æ¥èƒ½åŠ›"></a>å…¬ä¼—å·çš„è¿æ¥èƒ½åŠ›</h2><h3 id="å¡åˆ¸-å°ç¨‹åºæ‰“é€š"><a href="#å¡åˆ¸-å°ç¨‹åºæ‰“é€š" class="headerlink" title="å¡åˆ¸-å°ç¨‹åºæ‰“é€š"></a><a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1499332673_Unm7V" target="_blank" rel="external">å¡åˆ¸-å°ç¨‹åºæ‰“é€š</a></h3><p>1.å°ç¨‹åºå†…é¢†å–å¡åˆ¸<br>2.å°ç¨‹åºå†…æŸ¥çœ‹å¡åˆ¸<br>3.å°ç¨‹åºå¼€å¡ç»„ä»¶<br>4.å¡åˆ¸å†…è·³è½¬å°ç¨‹åº</p>
<h3 id="è‡ªå®šä¹‰èœå•è·³è½¬å°ç¨‹åº"><a href="#è‡ªå®šä¹‰èœå•è·³è½¬å°ç¨‹åº" class="headerlink" title="è‡ªå®šä¹‰èœå•è·³è½¬å°ç¨‹åº"></a><a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421141013" target="_blank" rel="external">è‡ªå®šä¹‰èœå•è·³è½¬å°ç¨‹åº</a></h3><h3 id="ä¸ªæ€§åŒ–èœå•è·³è½¬å°ç¨‹åº"><a href="#ä¸ªæ€§åŒ–èœå•è·³è½¬å°ç¨‹åº" class="headerlink" title="ä¸ªæ€§åŒ–èœå•è·³è½¬å°ç¨‹åº"></a><a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1455782296" target="_blank" rel="external">ä¸ªæ€§åŒ–èœå•è·³è½¬å°ç¨‹åº</a></h3><h3 id="ç¾¤å‘å›¾æ–‡ä¸­æ’å…¥å°ç¨‹åº"><a href="#ç¾¤å‘å›¾æ–‡ä¸­æ’å…¥å°ç¨‹åº" class="headerlink" title="ç¾¤å‘å›¾æ–‡ä¸­æ’å…¥å°ç¨‹åº"></a><a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1481187827_i0l21" target="_blank" rel="external">ç¾¤å‘å›¾æ–‡ä¸­æ’å…¥å°ç¨‹åº</a></h3><ul>
<li>å°ç¨‹åºå¡ç‰‡è·³è½¬å°ç¨‹åºï¼Œä»£ç ç¤ºä¾‹ï¼š</li>
<li><strong>å°ç¨‹åºå¡ç‰‡çš„å°é¢å›¾é“¾æ¥ï¼Œå›¾ç‰‡å¿…é¡»ä¸º1080*864åƒç´ </strong></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">mp-miniprogram</span> <span class="attribute">data-miniprogram-appid</span>=<span class="value">"wx123123123"</span> <span class="attribute">data-miniprogram-path</span>=<span class="value">"pages/index/index"</span> <span class="attribute">data-miniprogram-title</span>=<span class="value">"å°ç¨‹åºç¤ºä¾‹"</span> <span class="attribute">data-progarm-imageurl</span>=<span class="value">"http://mmbizqbic.cn/demo.jpg"</span>&gt;</span><span class="tag">&lt;/<span class="title">mp-miniprogram</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ–‡å­—è·³è½¬å°ç¨‹åºï¼Œä»£ç ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">p</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">data-miniprogram-appid</span>=<span class="value">"wx123123123"</span> <span class="attribute">data-miniprogram-path</span>=<span class="value">"pages/index"</span> <span class="attribute">href</span>=<span class="value">""</span>&gt;</span>ç‚¹å‡»æ–‡å­—è·³è½¬å°ç¨‹åº<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å›¾ç‰‡è·³è½¬å°ç¨‹åºï¼Œä»£ç ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">p</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">data-miniprogram-appid</span>=<span class="value">"wx123123123"</span> <span class="attribute">data-miniprogram-path</span>=<span class="value">"pages/index"</span> <span class="attribute">href</span>=<span class="value">""</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">data-src</span>=<span class="value">"http://mmbiz.qpic.cn/mmbiz_jpg/demo/0?wx_fmt=jpg"</span>&gt;</span><span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="å¯åˆ©ç”¨-unionId-è®©å…³è”çš„å…¬ä¼—å·ä¸‹å‘æ¶ˆæ¯é€šçŸ¥-æ¨¡ç‰ˆæ¶ˆæ¯è·³è½¬å°ç¨‹åº"><a href="#å¯åˆ©ç”¨-unionId-è®©å…³è”çš„å…¬ä¼—å·ä¸‹å‘æ¶ˆæ¯é€šçŸ¥-æ¨¡ç‰ˆæ¶ˆæ¯è·³è½¬å°ç¨‹åº" class="headerlink" title="å¯åˆ©ç”¨ unionId è®©å…³è”çš„å…¬ä¼—å·ä¸‹å‘æ¶ˆæ¯é€šçŸ¥ æ¨¡ç‰ˆæ¶ˆæ¯è·³è½¬å°ç¨‹åº"></a>å¯åˆ©ç”¨ unionId è®©å…³è”çš„å…¬ä¼—å·ä¸‹å‘æ¶ˆæ¯é€šçŸ¥ <a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1433751277" target="_blank" rel="external">æ¨¡ç‰ˆæ¶ˆæ¯è·³è½¬å°ç¨‹åº</a></h3><h3 id="ä¼šå‘˜å¡è·³å°ç¨‹åº"><a href="#ä¼šå‘˜å¡è·³å°ç¨‹åº" class="headerlink" title="ä¼šå‘˜å¡è·³å°ç¨‹åº"></a><a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1451025283" target="_blank" rel="external">ä¼šå‘˜å¡è·³å°ç¨‹åº</a></h3><h2 id="å°ç¨‹åºä¸­ç›¸å…³çš„åœºæ™¯å€¼"><a href="#å°ç¨‹åºä¸­ç›¸å…³çš„åœºæ™¯å€¼" class="headerlink" title="å°ç¨‹åºä¸­ç›¸å…³çš„åœºæ™¯å€¼"></a>å°ç¨‹åºä¸­ç›¸å…³çš„åœºæ™¯å€¼</h2><table>
<thead>
<tr>
<th>sence</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>1020</td>
<td>å…¬ä¼—å· profile é¡µç›¸å…³å°ç¨‹åºåˆ—è¡¨</td>
</tr>
<tr>
<td>1035</td>
<td>å…¬ä¼—å·è‡ªå®šä¹‰èœå•</td>
</tr>
<tr>
<td>1043</td>
<td>å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯</td>
</tr>
<tr>
<td>1058</td>
<td>å…¬ä¼—å·æ–‡ç« </td>
</tr>
<tr>
<td>1067</td>
<td>å…¬ä¼—å·æ–‡ç« å¹¿å‘Š</td>
</tr>
<tr>
<td>1074</td>
<td>å…¬ä¼—å·ä¼šè¯ä¸‹å‘çš„å°ç¨‹åºæ¶ˆæ¯å¡ç‰‡</td>
</tr>
</tbody>
</table>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/å¾®ä¿¡å°ç¨‹åº/">å¾®ä¿¡å°ç¨‹åº</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-test-wechat-app" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/06/15/test-wechat-app/" class="article-date">
  	<time datetime="2017-06-15T08:30:03.000Z" itemprop="datePublished">2017-06-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/15/test-wechat-app/">å°ç¨‹åºaudioç»„ä»¶éŸ³é¢‘æ ¼å¼æ”¯æŒæµ‹è¯•</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <table>
<thead>
<tr>
<th>éŸ³é¢‘æ–‡ä»¶ç±»å‹</th>
<th>ios (iphone6s 10.3.2 wechat6.5.8)</th>
<th>android(sony Z3 6.0.1 wechat6.5.8)</th>
</tr>
</thead>
<tbody>
<tr>
<td>aac</td>
<td>ok</td>
<td>ok</td>
</tr>
<tr>
<td>mp3</td>
<td>ok</td>
<td>ok</td>
</tr>
<tr>
<td>wav</td>
<td>ok</td>
<td>ok</td>
</tr>
<tr>
<td>ac3</td>
<td>ok</td>
<td>\</td>
</tr>
<tr>
<td>amr</td>
<td>\</td>
<td>ok</td>
</tr>
<tr>
<td>flac</td>
<td>\</td>
<td>ok</td>
</tr>
<tr>
<td>ape</td>
<td>\</td>
<td>\</td>
</tr>
<tr>
<td>mmf</td>
<td>\</td>
<td>\</td>
</tr>
<tr>
<td>mp2</td>
<td>\</td>
<td>\</td>
</tr>
<tr>
<td>ogg</td>
<td>\</td>
<td>\</td>
</tr>
<tr>
<td>wma</td>
<td>\</td>
<td>\</td>
</tr>
<tr>
<td>wv</td>
<td>\</td>
<td>\</td>
</tr>
</tbody>
</table>
<ul>
<li><a href="http://cdn.zoeservers.com/testaudio/Don%27t%20Cry%20%28Original%29-Guns%20N%27%20Roses.aac" target="_blank" rel="external">æµ‹è¯•æ–‡ä»¶-aac</a></li>
<li><a href="http://cdn.zoeservers.com/testaudio/Don%27t%20Cry%20%28Original%29-Guns%20N%27%20Roses.ac3" target="_blank" rel="external">æµ‹è¯•æ–‡ä»¶-ac3</a></li>
<li><a href="http://cdn.zoeservers.com/testaudio/Don%27t%20Cry%20%28Original%29-Guns%20N%27%20Roses.amr" target="_blank" rel="external">æµ‹è¯•æ–‡ä»¶-amr</a></li>
<li><a href="http://cdn.zoeservers.com/testaudio/Don%27t%20Cry%20%28Original%29-Guns%20N%27%20Roses.ape" target="_blank" rel="external">æµ‹è¯•æ–‡ä»¶-ape</a></li>
<li><a href="http://cdn.zoeservers.com/testaudio/Don%27t%20Cry%20%28Original%29-Guns%20N%27%20Roses.flac" target="_blank" rel="external">æµ‹è¯•æ–‡ä»¶-flac</a></li>
<li><a href="http://cdn.zoeservers.com/testaudio/Don%27t%20Cry%20%28Original%29-Guns%20N%27%20Roses.mmf" target="_blank" rel="external">æµ‹è¯•æ–‡ä»¶-mmf</a></li>
<li><a href="http://cdn.zoeservers.com/testaudio/Don%27t%20Cry%20%28Original%29-Guns%20N%27%20Roses.mp2" target="_blank" rel="external">æµ‹è¯•æ–‡ä»¶-mp2</a></li>
<li><a href="http://cdn.zoeservers.com/testaudio/Don%27t%20Cry%20%28Original%29-Guns%20N%27%20Roses.mp3" target="_blank" rel="external">æµ‹è¯•æ–‡ä»¶-mp3</a></li>
<li><a href="http://cdn.zoeservers.com/testaudio/Don%27t%20Cry%20%28Original%29-Guns%20N%27%20Roses.ogg" target="_blank" rel="external">æµ‹è¯•æ–‡ä»¶-ogg</a></li>
<li><a href="http://cdn.zoeservers.com/testaudio/Don%27t%20Cry%20%28Original%29-Guns%20N%27%20Roses.wav" target="_blank" rel="external">æµ‹è¯•æ–‡ä»¶-wav</a></li>
<li><a href="http://cdn.zoeservers.com/testaudio/Don%27t%20Cry%20%28Original%29-Guns%20N%27%20Roses.wma" target="_blank" rel="external">æµ‹è¯•æ–‡ä»¶-wma</a></li>
<li><a href="http://cdn.zoeservers.com/testaudio/Don%27t%20Cry%20%28Original%29-Guns%20N%27%20Roses.wv" target="_blank" rel="external">æµ‹è¯•æ–‡ä»¶-wv</a></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wechat-å°ç¨‹åº/">wechat å°ç¨‹åº</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-something-interesting" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/05/26/something-interesting/" class="article-date">
  	<time datetime="2017-05-26T09:53:03.000Z" itemprop="datePublished">2017-05-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/26/something-interesting/">è®°å½•ä¸€äº›æœ‰è¶£çš„è¿ç”¨</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>æ£€æµ‹èµ„æºåŠ è½½</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¡Œé¢ç«¯é€‚ç”¨äº chrome Firefox IE Opera ï¼ˆEdgeå’ŒSafariä¸æ”¯æŒï¼‰</span></span><br><span class="line"><span class="comment">// å¸¸è§ç§»åŠ¨ç«¯ ä»…Android Webview, Firefox Mobile (Gecko)25.0+,Chrome for Androidæ”¯æŒ</span></span><br><span class="line"><span class="comment">// æ‰€æœ‰css+jsèµ„æº</span></span><br><span class="line"><span class="keyword">var</span> allResources = <span class="built_in">Array</span>.from(<span class="built_in">document</span>.getElementsByTagName(<span class="string">'script'</span>))  </span><br><span class="line">    .map(script =&gt; script.src)    </span><br><span class="line">    .concat(</span><br><span class="line">        <span class="built_in">Array</span>.from(<span class="built_in">document</span>.getElementsByTagName(<span class="string">'link'</span>))</span><br><span class="line">            .filter((link) =&gt; link.rel === <span class="string">'stylesheet'</span>)</span><br><span class="line">            .map((link) =&gt; link.href)</span><br><span class="line">    );</span><br><span class="line"><span class="comment">// åŠ è½½æˆåŠŸçš„css+jsèµ„æº</span></span><br><span class="line"><span class="keyword">var</span> loadedResources = performance.getEntriesByType(<span class="string">'resource'</span>)  </span><br><span class="line">    .filter((res) =&gt; &#123;</span><br><span class="line">        <span class="keyword">var</span> url = res.name;</span><br><span class="line">        <span class="keyword">var</span> urlWithoutParam = url.split(<span class="string">'?'</span>)[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">return</span> [<span class="string">'script'</span>, <span class="string">'link'</span>].indexOf(res.initiatorType) !== -<span class="number">1</span> &amp;&amp;</span><br><span class="line">            [<span class="regexp">/\.css$/</span>, <span class="regexp">/\.js$/</span>].some((reg)  =&gt; reg.test(urlWithoutParam));</span><br><span class="line">    &#125;)).map((res) =&gt; res.name);</span><br><span class="line"><span class="comment">// åŠ è½½å¤±è´¥çš„css+jsèµ„æº</span></span><br><span class="line"><span class="keyword">var</span> failedResources = allResources.filter((url) =&gt; loadedResources.indexOf(url) === -<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>ç›‘å¬é¡µé¢å¯è§</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'visibilitychange'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.title = <span class="built_in">document</span>.hidden ? <span class="string">'å´©æºƒäº†ï¼Œæ¥çœ‹ä¸€ä¸‹'</span> : <span class="string">'ğŸ˜ˆzoeyingğŸ˜ˆ'</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>å­—ç¬¦ç”» é™„ä¸Šä¸€ä¸ªç”Ÿæˆå­—ç¬¦ç”»çš„ç½‘ç«™<a href="http://patorjk.com/software/taag/" target="_blank" rel="external">ğŸ‘‰Text Ascii Art Generator</a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">`</span><br><span class="line"> â–„â–„â–„â–„â–„â–„   â–ˆâ–ˆâ–ˆâ–ˆâ–„ â–„â–ˆâ–ˆâ–ˆâ–„          â–„â–„â–„â–„â–„   â–ˆâ–ˆ   â–€â–„    â–„          â–„  â–ˆ â–„â–ˆ </span><br><span class="line">â–€   â–„â–„â–€   â–ˆ   â–ˆ â–ˆâ–€   â–€        â–ˆ     â–€â–„ â–ˆ â–ˆ    â–ˆ  â–ˆ          â–ˆ   â–ˆ â–ˆâ–ˆ </span><br><span class="line"> â–„â–€â–€   â–„â–€ â–ˆ   â–ˆ â–ˆâ–ˆâ–„â–„        â–„  â–€â–€â–€â–€â–„   â–ˆâ–„â–„â–ˆ    â–€â–ˆ           â–ˆâ–ˆâ–€â–€â–ˆ â–ˆâ–ˆ </span><br><span class="line"> â–€â–€â–€â–€â–€â–€   â–€â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–„   â–„â–€      â–€â–„â–„â–„â–„â–€    â–ˆ  â–ˆ    â–ˆ            â–ˆ   â–ˆ â–â–ˆ </span><br><span class="line">                â–€â–ˆâ–ˆâ–ˆâ–€                     â–ˆ  â–„â–€                â–ˆ   â– </span><br><span class="line">                                         â–ˆ                    â–€      </span><br><span class="line">                                        â–€                            </span><br><span class="line">`</span>);</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-contenteditable-range-cursor-in-ios" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/05/26/contenteditable-range-cursor-in-ios/" class="article-date">
  	<time datetime="2017-05-26T02:39:03.000Z" itemprop="datePublished">2017-05-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/26/contenteditable-range-cursor-in-ios/">çˆ¬å‘ï¼šWordPress-Editor-iOS æ’å…¥å›¾ç‰‡å…‰æ ‡ä½ç½®æ§åˆ¶</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>WordPress-Editor-iOS æ’å…¥å›¾ç‰‡åå…‰æ ‡ä½ç½®æ²¡æœ‰ç§»åˆ°å›¾ç‰‡åé¢å’‹åŠï¼Ÿ</p>
</blockquote>
<p>é—®é¢˜å¦‚ä¸‹ï¼ˆè¿™æ˜¯wordpress-ios ä½¿ç”¨äº†<a href="https://github.com/wordpress-mobile/WordPress-Editor-iOS" target="_blank" rel="external">WordPress-Editor-iOS</a>ä½œä¸ºå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰ï¼š</p>
<p><img src="http://cdn.zoeservers.com/blog/contenteditable-range.gif" alt="WordPress-Editor-iOS æ’å…¥å›¾ç‰‡åå…‰æ ‡ä½ç½®æ²¡æœ‰ç§»åˆ°å›¾ç‰‡åé¢å’‹åŠ"></p>
<p>åˆ†ææ’å…¥å›¾ç‰‡çš„ä»£ç ï¼ˆç²¾ç®€ç‰ˆï¼‰:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertImage</span>(<span class="params"> ...args </span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> sel=<span class="built_in">window</span>.getSelection()</span><br><span class="line">    <span class="keyword">var</span> range = sel.getRangeAt(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>)</span><br><span class="line">    img.src=<span class="string">'https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®é™…ä»£ç åœ¨imgå¤–é¢åŒ…äº†ä¸€å±‚spanæ¥åšæ ·å¼ï¼Œè¿™é‡Œç›´æ¥ç”¨imgç±»æµ‹è¯•å¯ä»¥å¾—åˆ°ä¸€æ ·çš„æ•ˆæœ</span></span><br><span class="line">    range.insertNode(img)</span><br><span class="line"></span><br><span class="line">    ...otherThings</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä¸Šé¢ä»£ç ä¸­ insertNode è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨å½“å‰é€‰åŒºçš„å¼€å§‹å¤„æ’å…¥ node ï¼Œ é‚£ä¹ˆå¦‚æœæˆ‘ä»¬æ‰‹åŠ¨å°†imgåŠ å…¥é€‰åŒºï¼Œå†å°† range çš„å…‰æ ‡æŠ˜å ï¼ˆrange.collapse()ï¼‰ï¼Œä½¿å…‰æ ‡ç§»åŠ¨åˆ°æœ€åï¼Œåº”è¯¥å¯ä»¥è§£å†³é—®é¢˜ã€‚</p>
<p>åŠ å…¥logï¼Œå‘ç°æ’å…¥imgä¹‹åï¼Œå®ƒæ˜¯åŒ…å«åœ¨é€‰åŒºå†…çš„</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(range.collapsed,range.startOffset,range.endOffset)</span><br><span class="line">range.insertNode(img)</span><br><span class="line"><span class="built_in">console</span>.log(range.collapsed,range.startOffset,range.endOffset)</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆè¿™é‡Œç›´æ¥æ‰§è¡Œ range.collapse() ï¼Œ å¯ä»¥çœ‹åˆ°åœ¨chromeä¸­å·²ç»å¯ä»¥è¾¾åˆ°æ•ˆæœ<a href="http://zoeservers.com/example/range.html" target="_blank" rel="external">ğŸ‘‰ğŸ‘‰ğŸ‘‰ä¾‹å­ğŸ‘ˆğŸ‘ˆğŸ‘ˆ</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">range.insertNode(img)</span><br><span class="line">range.collapse()</span><br></pre></td></tr></table></figure>
<p>ç„¶è€Œï¼Œappä¸­ä»ç„¶ä¸èµ·ä½œç”¨ï¼Œç”šè‡³ä¼šåœ¨æ’å…¥ç¬¬ä¸€å¼ å›¾ç‰‡æ—¶å¤±å»ç„¦ç‚¹ï¼Œåœ¨ stackoverflow ä¸­æ‰¾åˆ°æ–°å»ºé€‰åŒºçš„æ–¹å¼å»é€‰ä¸­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">range.insertNode(img)</span><br><span class="line">range.collapse()</span><br><span class="line"></span><br><span class="line"><span class="comment">//Create a range (a range is a like the selection but invisible)</span></span><br><span class="line"><span class="keyword">var</span> newrange = <span class="built_in">document</span>.createRange();</span><br><span class="line"><span class="comment">//Select the entire contents of the element with the newrange</span></span><br><span class="line">newrange.setStart(img,<span class="number">0</span>);</span><br><span class="line"><span class="comment">//collapse the range to the end point. false means collapse to end rather than the start</span></span><br><span class="line">newrange.collapse(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//get the selection object (allows you to change selection)</span></span><br><span class="line"><span class="keyword">var</span> selection = <span class="built_in">window</span>.getSelection();</span><br><span class="line"><span class="comment">//remove any selections already made</span></span><br><span class="line">selection.removeAllRanges();</span><br><span class="line">selection.addRange(newrange);</span><br></pre></td></tr></table></figure>
<p>rang è¿˜æœ‰ä¸€ä¸ª selectNodeContents æ–¹æ³•å¯ä»¥ç”¨æ¥é€‰ä¸­æ•´ä¸ªç¼–è¾‘åŒºåŸŸï¼ŒæŠ˜å åå¯ä»¥è®²å…‰æ ‡ç§»åŠ¨åˆ°æœ€å</p>
<p>æ–°å»ºé€‰åŒºåï¼Œappä¸­ä¾ç„¶æ— è§£â€“å…‰æ ‡ä¼šåœ¨æ’å…¥å›¾ç‰‡åï¼Œä»å›¾ç‰‡åé¢è·³åˆ°å›¾ç‰‡å‰é¢ï¼Œè¿™æ—¶å€™æŒ‰ä¸€ä¸‹é”®ç›˜ä¸­çš„åˆ é™¤ï¼Œå›¾ç‰‡ç¥å¥‡çš„è¢«åˆ æ‰äº† = =|||</p>
<p>å¦‚æœï¼Œè¿™æ˜¯WKwebviewçš„bug é‚£æˆ‘â€¦â€¦ä¹Ÿåªèƒ½å¿äº†</p>
<p>å°è¯•åœ¨å›¾ç‰‡åé¢åŠ ä¸€ä¸ª br/span ç„¶åé€‰ä¸­ br/span å»æ”¹å˜å…‰æ ‡ä½ç½®ï¼Œæµ‹è¯•å®Œè´¥â€¦â€¦</p>
<p>é‚£ä¹ˆï¼Œå‡è®¾ï¼Œè¿™æ˜¯spanè¿™ä¸ªèŠ‚ç‚¹çš„é—®é¢˜ï¼Œæ¢åšæ˜¯textNodeâ€¦..</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">range.deleteContents();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> text = <span class="built_in">document</span>.createTextNode(<span class="string">'æè¿°è¿™å¼ å›¾ç‰‡~'</span>)</span><br><span class="line">range.insertNode(text)</span><br><span class="line">range.insertNode(img)</span><br><span class="line">range.collapse()</span><br><span class="line"></span><br><span class="line"><span class="comment">//Create a range (a range is a like the selection but invisible)</span></span><br><span class="line"><span class="keyword">var</span> newrange = <span class="built_in">document</span>.createRange();</span><br><span class="line"><span class="comment">//Select the entire contents of the element with the newrange</span></span><br><span class="line">newrange.setStart(img,<span class="number">0</span>);</span><br><span class="line"><span class="comment">//collapse the range to the end point. false means collapse to end rather than the start</span></span><br><span class="line">newrange.collapse(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//get the selection object (allows you to change selection)</span></span><br><span class="line"><span class="keyword">var</span> selection = <span class="built_in">window</span>.getSelection();</span><br><span class="line"><span class="comment">//remove any selections already made</span></span><br><span class="line">selection.removeAllRanges();</span><br><span class="line">selection.addRange(newrange);</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸‹å›¾ï¼ˆè‡ªå®¶appï¼‰ï¼Œåªèƒ½æ›²çº¿æ•‘å›½äº†</p>
<p><img src="http://cdn.zoeservers.com/00f93ddce9b2a40ea2e4f2cd5a975a93.gif" alt="åœ¨å›¾ç‰‡ååŠ å…¥textNodeå¹¶é€‰ä¸­"></p>
<p>å‚è€ƒï¼š</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/range" target="_blank" rel="external">MDN &gt; web apis &gt; range</a><br><a href="http://www.zhangxinxu.com/wordpress/2011/04/js-range-html%E6%96%87%E6%A1%A3%E6%96%87%E5%AD%97%E5%86%85%E5%AE%B9%E9%80%89%E4%B8%AD%E3%80%81%E5%BA%93%E5%8F%8A%E5%BA%94%E7%94%A8%E4%BB%8B%E7%BB%8D/" target="_blank" rel="external">JS Range HTMLæ–‡æ¡£/æ–‡å­—å†…å®¹é€‰ä¸­ã€åº“åŠåº”ç”¨ä»‹ç»</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hybird/">hybird</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-zhihu-spider" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/05/23/zhihu-spider/" class="article-date">
  	<time datetime="2017-05-23T06:38:50.000Z" itemprop="datePublished">2017-05-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/23/zhihu-spider/">phantomjs nodejs çˆ¬æ•°æ®</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>è¿è¥ç«¥é‹æƒ³è¦å¯¹çŸ¥ä¹çš„ç›¸å…³æ•°æ®åšåˆ†æ</p>
</blockquote>
<ul>
<li>æŠ“å–ç¬¬ä¸€æ³¢æ•°æ®èŠ±è´¹ 3 å°æ—¶å·¦å³</li>
<li>ä¼˜åŒ–æ•°æ®&amp;æ”¹è‰¯ä»£ç   2 å°æ—¶å·¦å³</li>
<li>æŠ“å–ç¬¬äºŒæ³¢æ•°æ®     10 åˆ†é’Ÿ</li>
</ul>
<p>éœ€è¦æŠ“å–æ•°æ®çš„é¡µé¢æœ‰ä¸¤ä¸ª</p>
<ol>
<li>æœç´¢<strong>ç»“æœé¡µé¢</strong>ï¼ˆé—®é¢˜åˆ—è¡¨ä»¥åŠè¯¥é—®é¢˜çš„é«˜ç¥¨å›ç­”åˆ—è¡¨ï¼‰</li>
<li>1ä¸­å¯å¾—åˆ°çš„<strong>é—®é¢˜é¡µé¢</strong>å†…<strong>å…³æ³¨é‡</strong>ä»¥åŠ<strong>æµè§ˆé‡</strong></li>
</ol>
<p>ç•Œé¢1 çŸ¥ä¹ä¸­åŠ è½½æ›´å¤šç”¨çš„æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼Œç›´æ¥è¿”å›htmlå­—ç¬¦ä¸²ï¼Œè¦è§£æè¿™éƒ¨åˆ†æ•°æ®å‘¢éœ€è¦ç»“åˆç•Œé¢ä¸­çš„æ ‡ç­¾ï¼Œç”¨æ­£åˆ™å»æå–ï¼Œæƒ³åˆ°è¿™é‡Œï¼Œåæ­£ç•Œé¢å·²ç»åœ¨çœ¼å‰ä½•ä¸ç›´æ¥æ“ä½œdomå–æ•°æ®å‘¢ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector();</span><br></pre></td></tr></table></figure>
<p>äºæ˜¯åœ¨è¿™ä¸€æ­¥ä¸­åªéœ€è¦ä¼šæ‰“å¼€æ§åˆ¶å°ï¼Œä¼šæ‰¾dom classçš„å…³ç³»ï¼Œå¯è½»æ˜“å¾—åˆ°é—®é¢˜çš„åˆ—è¡¨ </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[&#123;</span><br><span class="line">	<span class="string">"title"</span>: <span class="string">"ç‰™é½¿çŸ«æ­£å¯¹ä¸ªäººå¤–è²Œå˜åŒ–æœ‰å¤šå¤§å½±å“ï¼Ÿ"</span>,</span><br><span class="line">	<span class="string">"topicUrl"</span>: <span class="string">"https://www.zhihu.com/question/49519516"</span>,</span><br><span class="line">	<span class="string">"commentAmount"</span>: <span class="string">"483 æ¡è¯„è®º"</span>,</span><br><span class="line">	<span class="string">"vote"</span>: <span class="string">"1223"</span>,</span><br><span class="line">	<span class="string">"author"</span>: <span class="string">"Vivian"</span>,</span><br><span class="line">	<span class="string">"authorHome"</span>: <span class="string">"https://www.zhihu.com/people/vivian-74-91"</span>,</span><br><span class="line">	<span class="string">"badge"</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="string">"badgeSummary"</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="string">"bio"</span>: <span class="string">"ä¸€æ— æ‰€æ˜¯çš„ç©ºæƒ³è€…"</span>,</span><br><span class="line">	<span class="string">"answerDigest"</span>: <span class="string">"ç”¨æœ¬äººçš„çœŸå®ç…§ç‰‡æ¥å›ç­”è¿™ä¸ªæé—®ç…§ç‰‡è®°å½•äº†æ•´ç‰™å‰åçš„å®Œæ•´å˜åŒ–,åŒ…æ‹¬ç‰™é½¿å’Œè„¸å‹,29å²æ‰å¼€å§‹çŸ«æ­£,å†æ—¶ä¸€å¹´åŠ,æœŸé—´ç»å†äº†æˆ´ç€ç‰™å¥—æ‹å©šçº±ç…§,ä¸¾åŠå©šç¤¼,æ—…è¡Œâ€¦... ä»€ä¹ˆæ„Ÿè§‰?è¦ä¸Šå¤©å•Šå“ˆå“ˆå“ˆå“ˆå“ˆ~æ‰€ä»¥,å¯èƒ½angelababy çœŸçš„åªæ˜¯åšäº†ç‰™é½¿çŸ«æ­£è€Œå·²!ä¸€ç›´è§‰å¾—è‡ªå·±ç‰™é½¿ä¸â€¦æ˜¾ç¤ºå…¨éƒ¨"</span>,</span><br><span class="line">	<span class="string">"answerUrl"</span>: <span class="string">"https://www.zhihu.com/question/49519516/answer/137252689"</span>,</span><br><span class="line">	<span class="string">"publishTime"</span>: <span class="string">"2016-12-23"</span>,</span><br><span class="line">	<span class="string">"updateTime"</span>: <span class="string">"2017-01-02"</span>,</span><br><span class="line">&#125;,</span><br><span class="line">...others</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>ä¹‹å‰çœ‹è¿‡è®¸å¤šphantomjsçš„åº”ç”¨æ–‡ç« ï¼Œä¾é æ„å»ºä¸€ä¸ªæµè§ˆå™¨è¿è¡Œç¯å¢ƒæ¨¡æ‹Ÿç”¨æˆ·è¡Œä¸ºï¼Œå¯ä»¥åšè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œuiæˆªå›¾ï¼Œçˆ¬è™«ç­‰ã€‚</p>
<p>ç•Œé¢2 æ˜¯æ ¹æ®<a href="https://www.zhihu.com/question/49519516" target="_blank" rel="external">topicUrl</a>åœ¨é—®é¢˜è¯¦æƒ…é¡µæŠ“å–<strong>å…³æ³¨è€…ï¼ˆäººæ•°ï¼‰</strong>ï¼Œ<strong>è¢«æµè§ˆï¼ˆæ¬¡æ•°ï¼‰</strong>ä»¥åŠé—®é¢˜æ‰€å±çš„tagï¼Œè¿™ä¸€æ­¥å°±éœ€è¦phantomjsæ¥è·‘å¾ªç¯äº†ã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">phantomjs fetchAnswerjs <span class="number">0</span> <span class="number">150</span></span><br></pre></td></tr></table></figure>
<p>phantomjs fetchAnswerjs 0( arg[1] start_index ) 150( arg[2] times )</p>
<p>ä»¥ä¸‹æ˜¯ç®€è¦æµç¨‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pageç”¨æ¥æ‰“å¼€æŒ‡å®šurlå¹¶æ‰§è¡Œæ•°æ®æŠ“å–</span></span><br><span class="line"><span class="keyword">var</span> page = <span class="built_in">require</span>(<span class="string">'webpage'</span>).create(), </span><br><span class="line"><span class="comment">// è¯»å–ä¸Šä¸€æ­¥å¾—åˆ°çš„åˆ—è¡¨.jsonæ•°æ® æ ¹æ®topicUrlæŠ“å–é¡µé¢</span></span><br><span class="line">    fs = <span class="built_in">require</span>(<span class="string">"fs"</span>),</span><br><span class="line"><span class="comment">// system.args [array] å–terninalä¼ é€’çš„å‚æ•° </span></span><br><span class="line"><span class="comment">// ä½¿ç”¨äº†ä¸¤ä¸ªå‚æ•°ï¼ˆ start_index , times ï¼‰æ¥æ§åˆ¶æ•´ä¸ªå¾ªç¯  </span></span><br><span class="line">    system = <span class="built_in">require</span>(<span class="string">'system'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// function startFetch( url )</span></span><br><span class="line">	page.open(  url , <span class="function"><span class="keyword">function</span> (<span class="params">status</span>) </span>&#123;</span><br><span class="line">	    <span class="keyword">if</span> (status !== <span class="string">'success'</span>) &#123;</span><br><span class="line">	        <span class="built_in">console</span>.log(<span class="string">'FAIL to load the address'</span>);</span><br><span class="line">	    &#125;<span class="keyword">else</span>&#123;    	</span><br><span class="line">	    	</span><br><span class="line">		    <span class="keyword">var</span> data = page.evaluate(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="comment">// document.querySelector( everything );</span></span><br><span class="line">                <span class="keyword">return</span> &#123; ...data &#125;</span><br><span class="line">		    &#125;);</span><br><span class="line">            fullData[index] = &#123; ...fullData[index] , data &#125;</span><br><span class="line">            fs.write( filePathName , <span class="built_in">JSON</span>.stringify(fullData) );</span><br><span class="line">			afterFetch();</span><br><span class="line">			<span class="keyword">return</span> ;</span><br><span class="line">	    &#125;</span><br><span class="line"></span><br><span class="line">	&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">afterFetch</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">// compare current_index with start_index and times</span></span><br><span class="line">        <span class="comment">// try fullData[current_index]</span></span><br><span class="line">        start( fullData[current_index + <span class="number">1</span>] ) or phantom.exit();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// phantom é”™è¯¯å¤„ç† å¸¸é‡åˆ°ç•Œé¢404çš„æƒ…å†µ å¯ä»¥æ ¹æ®æŠ¥é”™æƒ…å†µè·³è¿‡</span></span><br><span class="line">phantom.onError = <span class="function"><span class="keyword">function</span>(<span class="params">msg, trace</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> msgStack = [<span class="string">'PHANTOM ERROR: '</span> + msg];</span><br><span class="line">    <span class="keyword">if</span> (trace &amp;&amp; trace.length) &#123;</span><br><span class="line">        msgStack.push(<span class="string">'TRACE:'</span>);</span><br><span class="line">        trace.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">t</span>) </span>&#123;</span><br><span class="line">            msgStack.push(<span class="string">' -&gt; '</span> + (t.file || t.sourceURL) + <span class="string">': '</span> + t.line + (t.function ? <span class="string">' (in function '</span> + t.function +<span class="string">')'</span> : <span class="string">''</span>));</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.error(msgStack.join(<span class="string">'\n'</span>));</span><br><span class="line">    phantom.exit(<span class="number">1</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><img src="http://cdn.zoeservers.com/zhihu.gif" alt="è¿è¡Œæ—¶çš„æˆªå›¾"></p>
<p>è¦çš„æ•°æ®éƒ½å·²ç»æŠ“å¥½å•¦ï¼Œä¸‹ä¸€æ­¥ç”¨nodejsæ”¹ä¸€ä¸‹æ ‡é¢˜ï¼Œè½¬æ¢æˆcsvæ–‡ä»¶æ–¹ä¾¿è¿è¥åŒå­¦ç”¨excelåšåˆ†æï¼Œå…¶å®æ”¹æ ‡é¢˜ä¹Ÿå¯ä»¥åœ¨phantomjsé‡Œé¢å®Œæˆã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¹Ÿæ˜¯ç”¨åˆ° fs</span></span><br><span class="line"><span class="keyword">let</span> dataList = <span class="built_in">require</span>(<span class="string">'./afterFormat.json'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = dataList.map( item =&gt; dealData(item) ) </span><br><span class="line"></span><br><span class="line">fs.writeFile( filetitle , <span class="built_in">JSON</span>.stringify( result ) , <span class="string">'utf8'</span> , <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'The file has been saved!'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img src="http://cdn.zoeservers.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20170523162357.png" alt="å¯¼å‡ºçš„æ–‡ä»¶æˆªå›¾"></p>
<p>æ‰“ç®—ä¸¢ç»™è¿è¥åŒå­¦ç”¨ç¥ç®­æ‰‹è‡ªå·±å»ç© : )</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-interview-questions" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/04/12/interview-questions/" class="article-date">
  	<time datetime="2017-04-12T09:32:31.000Z" itemprop="datePublished">2017-04-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/12/interview-questions/">è€ƒéªŒåŸºç¡€çš„é¢è¯•é¢˜</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>å¶ç„¶çœ‹åˆ°ä¸€ç¯‡è§£æé¢è¯•é¢˜ç›®çš„æ–‡ç« ï¼Œè€ƒéªŒäº†javascriptçš„å‡½æ•°ï¼Œå˜é‡ï¼Œå±æ€§ï¼ŒåŸå‹å¯¹è±¡ï¼Œä¼˜å…ˆçº§ç­‰è¦ç‚¹ã€‚</p>
<p>æœ‰åŒè¡Œè®¤ä¸ºè¿™åœ¨å®æˆ˜ä¸­æ²¡æœ‰ç”¨åˆ°ï¼Œä¸ç”¨ç†è§£ï¼Œç”šè‡³è®¤ä¸ºæ˜¯è„‘ç­‹æ€¥è½¬å¼¯ï¼Œæˆ‘å¹¶ä¸è®¤åŒè¿™æ ·çš„è§‚ç‚¹ï¼Œåœ¨å®é™…è°ƒè¯•ï¼Œç†è§£ç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºè¿™äº›å†™æ³•çš„è¯¯è§£æˆ–æ˜¯ä¸€çŸ¥åŠè§£ææ˜“æŠŠè‡ªå·±å¸¦å…¥å‘ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="number">1</span>); &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line">Foo.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="number">2</span>);&#125;;</span><br><span class="line">Foo.prototype.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="number">3</span>);&#125;;</span><br><span class="line"><span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="number">4</span>);&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="number">5</span>);&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//è¯·å†™å‡ºä»¥ä¸‹è¾“å‡ºç»“æœï¼š</span></span><br><span class="line">Foo.getName();</span><br><span class="line"><span class="comment">// 2 è®¿é—®å…¬æœ‰å±æ€§</span></span><br><span class="line">getName();</span><br><span class="line"><span class="comment">// 4 window.getName()</span></span><br><span class="line">Foo().getName();</span><br><span class="line"><span class="comment">// 1 window.getName()</span></span><br><span class="line">getName();</span><br><span class="line"><span class="comment">// 1 window.getName()</span></span><br><span class="line"><span class="keyword">new</span> Foo.getName();</span><br><span class="line"><span class="comment">// 2 è®¿é—®å…¬æœ‰å±æ€§</span></span><br><span class="line"><span class="keyword">new</span> Foo().getName();</span><br><span class="line"><span class="comment">// 1 (new Foo()).getName()</span></span><br><span class="line"><span class="keyword">new</span> <span class="keyword">new</span> Foo().getName();</span><br><span class="line"><span class="comment">// 3 new (new Foo()).getName()</span></span><br></pre></td></tr></table></figure>
<p><a href="http://www.codeceo.com/article/one-javascript-interview.html" target="_blank" rel="external">åŸæ–‡ä¸­æœ‰è¯¦ç»†è§£é‡Š</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-redpack-activity" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/04/07/redpack-activity/" class="article-date">
  	<time datetime="2017-04-07T10:25:37.000Z" itemprop="datePublished">2017-04-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/07/redpack-activity/">çº¢åŒ…æ´»åŠ¨</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å¹´å‰çš„çº¢åŒ…æ´»åŠ¨æ€»ç»“"><a href="#å¹´å‰çš„çº¢åŒ…æ´»åŠ¨æ€»ç»“" class="headerlink" title="å¹´å‰çš„çº¢åŒ…æ´»åŠ¨æ€»ç»“"></a>å¹´å‰çš„çº¢åŒ…æ´»åŠ¨æ€»ç»“</h2><ul>
<li>å…¬ä¼—å·çš„ç²‰ä¸é‡å¹¶ä¸é˜»ç¢æœ‰â€œåˆ©â€å†…å®¹åœ¨å¾®ä¿¡ä¸­çš„ä¼ æ’­åŠ›</li>
<li>ç¾Šæ¯›å…šæ˜¯éå¸¸å¯æ€•çš„</li>
<li>ç¼ºå°‘å‹åŠ›æµ‹è¯•</li>
<li>å°½å¯èƒ½çš„é™æ€åŒ–èƒ½å¤§å¤§å‡å°‘æœåŠ¡å™¨çš„å‹åŠ›</li>
<li>å°½å¯èƒ½çš„è®°å½•æ´»åŠ¨æ•°æ®</li>
<li>å‡ºé”™åçš„æ•°æ®å›æ»š</li>
<li>é¡ºæ‰‹åšçš„ç»Ÿè®¡åŠŸèƒ½å¾ˆå®ç”¨</li>
</ul>
<p>2017å¹´æ–°å¹´çš„å‰ä¸€å‘¨ï¼Œæ¥äº†ä¸ªå›é¦ˆæ–°è€ç”¨æˆ·å‘çº¢åŒ…çš„æ´»åŠ¨ï¼Œæ–°ç”¨æˆ·éœ€è¦å…³æ³¨å…¬ä¼—å·ï¼Œè€ç”¨æˆ·ç‚¹å‡»é¢†å–æŒ‰é’®åç”¨å…¬ä¼—å·ä¸‹å‘çº¢åŒ…ã€‚</p>
<p>è¿™æ¬¡æ´»åŠ¨ä»…åœ¨å…¬ä¼—å·æ–‡ç« ä¸­åšäº†å®£ä¼ ï¼Œå¹¶æ²¡æœ‰åœ¨å…¶å®ƒæ¸ é“åšæ¨å¹¿ï¼Œç„¶è€Œä¼¼ä¹è¢«ç¾Šæ¯›å…šç›¯ä¸Šï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œå‘å‡ºçº¢åŒ…çš„é€Ÿåº¦åƒä¸€ä¸ªæŒ‡æ•°å‡½æ•°ï¼Œå¤§çº¦6å°æ—¶åéšæœºçº¢åŒ…è¢«è–…å…‰ï¼Œ21:20 åˆ†å·¦å³è¿æ¥äº†ä¸€ä¸ªå°é«˜æ½®ï¼Œå¹¶ä¸”å‘å®Œåçš„å‡ ä¸ªå°æ—¶è®¿é—®é‡è¿˜åœ¨æŒç»­å¢åŠ ï¼Œç¬¬ä¸‰å¤©æ‰æ¢å¤æ­£å¸¸ã€‚å½“æ—¥çš„PVæ˜¯å¹³æ—¶çš„150å¤šå€ï¼Œé¢†å–çº¢åŒ…çš„ç”¨æˆ·ä¸­æ–°ç”¨æˆ·å 98%ã€‚</p>
<p>å‘çº¢åŒ…çš„è§„åˆ™ï¼š</p>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>åé¢</th>
<th>æ–¹å¼</th>
<th>é‡‘é¢ï¼ˆå…ƒï¼‰</th>
<th>éšæœºæ¦‚ç‡å æ¯”</th>
</tr>
</thead>
<tbody>
<tr>
<td>æŒ‡å®šè€ç”¨æˆ·</td>
<td>100</td>
<td>å›ºå®š</td>
<td>6.66</td>
<td>å…ƒ</td>
</tr>
<tr>
<td>æ™®é€šç”¨æˆ·</td>
<td>20</td>
<td>éšæœº</td>
<td>5~10</td>
<td>36/10000</td>
</tr>
<tr>
<td>æ™®é€šç”¨æˆ·</td>
<td>480</td>
<td>éšæœº</td>
<td>2~5</td>
<td>873/10000</td>
</tr>
<tr>
<td>æ™®é€šç”¨æˆ·</td>
<td>5000</td>
<td>éšæœº</td>
<td>1~2</td>
<td>å…ƒ</td>
</tr>
</tbody>
</table>
<p>ç›®å‰æ´»åŠ¨å·²ä¸‹æ¶ï¼Œä»¥ä¸‹æ˜¯ä¸šåŠ¡ä»£ç ã€‚</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">// æ´»åŠ¨ï¼šæ–°å¹´çº¢åŒ… zoe@20170116 </span></span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">happy_new_year</span><span class="params">(Request <span class="variable">$request</span>)</span> </span>&#123;</span><br><span class="line">	<span class="variable">$WechatJSMgr</span> = <span class="keyword">new</span> WechatJSMgr();</span><br><span class="line">	<span class="variable">$ua</span>= <span class="variable">$WechatJSMgr</span>-&gt;checkBrowser(<span class="variable">$request</span>);</span><br><span class="line">	<span class="variable">$err_msg</span> = <span class="string">''</span> ;</span><br><span class="line">	<span class="comment">// æ˜¯å¦å…³æ³¨äº†å…¬ä¼—å·ï¼Œ0æœªå…³æ³¨ï¼Œ1å…³æ³¨</span></span><br><span class="line">	<span class="variable">$subscription</span> = <span class="number">0</span>; </span><br><span class="line">	<span class="variable">$has_gift</span>     = <span class="number">0</span> ;</span><br><span class="line">	<span class="variable">$user</span> 		  = <span class="keyword">false</span> ;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (<span class="variable">$ua</span>==<span class="string">"wechat"</span>)&#123;</span><br><span class="line">		<span class="variable">$user</span> = @session(<span class="string">'wechat_user'</span>) ;</span><br><span class="line">		<span class="variable">$open_id</span> = <span class="variable">$user</span>[<span class="string">'openid'</span>];</span><br><span class="line">		<span class="keyword">if</span> ( !<span class="variable">$user</span> || <span class="keyword">empty</span>(<span class="variable">$open_id</span>) )<span class="keyword">return</span> redirect(<span class="string">'/wechat/auth_rate?url='</span>.urlencode(<span class="variable">$request</span>-&gt;getRequestUri()));</span><br><span class="line"></span><br><span class="line">		<span class="variable">$sendMsgMgr</span> = <span class="keyword">new</span> sendMsgMgr();</span><br><span class="line">		<span class="variable">$chk_wx_user</span> = <span class="variable">$sendMsgMgr</span>-&gt;chk_wx_user(<span class="variable">$open_id</span>);</span><br><span class="line">		<span class="keyword">if</span> ( <span class="variable">$chk_wx_user</span> )&#123;</span><br><span class="line">			<span class="variable">$subscription</span> = <span class="number">1</span> ;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// åˆ¤æ–­æ˜¯å¦é¢†è¿‡å¥–</span></span><br><span class="line">		<span class="variable">$gift</span> = ActivityHappyNewYearModel::where(<span class="string">'open_id'</span>, <span class="variable">$open_id</span> )-&gt;first();</span><br><span class="line">		<span class="keyword">if</span> ( <span class="keyword">empty</span>(<span class="variable">$gift</span>) )&#123;</span><br><span class="line">			<span class="variable">$gift</span> = <span class="keyword">new</span> ActivityHappyNewYearModel();</span><br><span class="line">			<span class="variable">$gift</span>-&gt;open_id = <span class="variable">$open_id</span> ;</span><br><span class="line">			<span class="variable">$gift</span>-&gt;user_name = <span class="variable">$user</span>[<span class="string">'nickname'</span>] ;</span><br><span class="line">			<span class="variable">$rs</span> = <span class="variable">$gift</span>-&gt;save();</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span> ( <span class="variable">$gift</span>-&gt;status == <span class="number">1</span> )&#123;</span><br><span class="line">			<span class="comment">// ç¤¼ç‰©å·²é¢†å–</span></span><br><span class="line">			<span class="variable">$has_gift</span> = <span class="number">1</span> ;		</span><br><span class="line">		&#125;</span><br><span class="line">           </span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="variable">$err_msg</span> = <span class="string">"æ´»åŠ¨éœ€è¦åœ¨å¾®ä¿¡ä¸­æ‰“å¼€ &gt;...&lt; "</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="variable">$wechatJSDK</span>  = <span class="variable">$WechatJSMgr</span>-&gt;get_JS_config(<span class="variable">$request</span>-&gt;getUri());</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> view(<span class="string">'activity.happy_new_year'</span>,[</span><br><span class="line">			<span class="string">'user'</span>		  =&gt; json_encode( <span class="variable">$user</span> ) ,</span><br><span class="line">			<span class="string">'wechatJSDK'</span>  =&gt; <span class="variable">$wechatJSDK</span>[<span class="string">'data'</span>][<span class="string">'config'</span>] ,</span><br><span class="line">			<span class="string">'err_msg'</span>     =&gt; <span class="variable">$err_msg</span> ,</span><br><span class="line">			<span class="string">'has_gift'</span>    =&gt; <span class="variable">$has_gift</span> ,</span><br><span class="line">			<span class="string">'subscription'</span>=&gt; <span class="variable">$subscription</span> ,</span><br><span class="line">			<span class="string">'from_subscribe'</span>=&gt; <span class="variable">$request</span>-&gt;has(<span class="string">'from_subscribe'</span>) ? <span class="number">1</span> : <span class="number">0</span> ,</span><br><span class="line">			<span class="string">'webstatic'</span> =&gt; <span class="string">'https://webstatic.xxxxx.com/activity/happy_new_year/'</span> , <span class="comment">// CDNé™æ€èµ„æºåœ°å€</span></span><br><span class="line">		]);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å¹´æ´»åŠ¨ step2 å‘çº¢åŒ…</span></span><br><span class="line"><span class="comment">// å¾®ä¿¡æ¥å£æ–‡æ¡£ https://pay.weixin.qq.com/wiki/doc/api/tools/cash_coupon.php?chapter=13_4&amp;index=3</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">happy_new_year_gift</span><span class="params">(Request <span class="variable">$request</span>)</span> </span>&#123;</span><br><span class="line">	DB::beginTransaction();</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		<span class="comment">// æ ¹æ®open_id æ¥å‘</span></span><br><span class="line">		<span class="variable">$open_id</span> = <span class="variable">$request</span>-&gt;input(<span class="string">'open_id'</span>);</span><br><span class="line">		<span class="variable">$err_msg</span> = <span class="string">''</span>;</span><br><span class="line">		<span class="variable">$err_code</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> ( !<span class="variable">$open_id</span> )&#123;</span><br><span class="line">			<span class="variable">$err_msg</span> = <span class="string">'è¯·åœ¨å¾®ä¿¡ä¸­æ‰“å¼€~'</span> ;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="comment">// åˆ¤æ–­æ˜¯å¦é¢†è¿‡å¥–</span></span><br><span class="line">			<span class="variable">$gift</span> = ActivityHappyNewYearModel::where(<span class="string">'open_id'</span>, <span class="variable">$open_id</span> )-&gt;first();</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> ( !<span class="keyword">empty</span>(<span class="variable">$gift</span>) &amp;&amp; <span class="variable">$gift</span>-&gt;status == <span class="number">1</span> )&#123;</span><br><span class="line">				<span class="comment">// ç¤¼ç‰©å·²é¢†å–</span></span><br><span class="line">				<span class="variable">$err_msg</span> = <span class="string">"å¥½çœ‹çš„ä½ å·²ç»é¢†è¿‡çº¢åŒ…äº†~"</span> ;</span><br><span class="line">				<span class="variable">$err_code</span> = <span class="number">99</span> ;</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="comment">// å‘çº¢åŒ…</span></span><br><span class="line">				<span class="keyword">if</span> ( <span class="keyword">empty</span>(<span class="variable">$gift</span>) )&#123;</span><br><span class="line">					<span class="variable">$gift</span> = <span class="keyword">new</span> ActivityHappyNewYearModel();</span><br><span class="line">					<span class="variable">$gift</span>-&gt;open_id = <span class="variable">$open_id</span> ;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="variable">$money</span> = <span class="number">0</span> ;</span><br><span class="line">				</span><br><span class="line">				<span class="comment">// 100ä½è€å®¢æˆ·ç»™6.66 					</span></span><br><span class="line">				<span class="keyword">if</span> ( <span class="variable">$gift</span>-&gt;isSeedUser() )&#123;</span><br><span class="line">					 <span class="variable">$money</span> = <span class="number">666</span> ;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">					 <span class="variable">$money</span> = <span class="variable">$this</span>-&gt;happy_new_year_money();</span><br><span class="line">					 <span class="keyword">if</span> ( <span class="variable">$money</span> == <span class="number">0</span>) &#123;</span><br><span class="line">						 <span class="variable">$err_msg</span> = <span class="string">'çº¢åŒ…å·²ç»è¢«æŠ¢å®Œå•¦&lt;br&gt;æ„Ÿè°¢æ‚¨æŒç»­å…³æ³¨&lt;br&gt;å¥åº·å°±æ˜¯æœ€å¤§çš„è´¢å¯Œ'</span>;</span><br><span class="line">					 &#125;</span><br><span class="line">					 </span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> ( <span class="variable">$money</span> )&#123;</span><br><span class="line">					 <span class="keyword">if</span> ( !<span class="variable">$gift</span>-&gt;gift_id ) <span class="variable">$gift</span>-&gt;save() ;</span><br><span class="line"></span><br><span class="line">					<span class="comment">// è¡¥é½giftid 4ä½æ•°</span></span><br><span class="line">					<span class="variable">$gift_id_paddding</span> = substr(strval(<span class="variable">$gift</span>-&gt;gift_id + <span class="number">10000</span>),<span class="number">1</span>,<span class="number">4</span>) ;</span><br><span class="line">					<span class="variable">$mch_id</span>     = config(<span class="string">'wechat.mch_id'</span>) ;</span><br><span class="line">					<span class="variable">$mch_billno</span> = <span class="variable">$mch_id</span> . date(<span class="string">'YmdHis'</span>) . <span class="variable">$gift_id_paddding</span> ;</span><br><span class="line"></span><br><span class="line">					<span class="variable">$business</span>  = <span class="keyword">new</span> Business( config(<span class="string">'wechat.app_id'</span>),config(<span class="string">'wechat.secret'</span>),config(<span class="string">'wechat.mch_id'</span>),config(<span class="string">'wechat.mch_key'</span>));</span><br><span class="line"></span><br><span class="line">					<span class="variable">$cert_path</span> = dirname(<span class="keyword">__FILE__</span>) .<span class="string">'/../../../../'</span>.config(<span class="string">'wechat.cert_path'</span>);</span><br><span class="line">					<span class="variable">$cert_path</span> = realpath(<span class="variable">$cert_path</span>) ;</span><br><span class="line"></span><br><span class="line">					<span class="variable">$key_path</span> = dirname(<span class="keyword">__FILE__</span>) .<span class="string">'/../../../../'</span>.config(<span class="string">'wechat.key_path'</span>);</span><br><span class="line">					<span class="variable">$key_path</span> = realpath(<span class="variable">$key_path</span>) ;</span><br><span class="line"></span><br><span class="line">					<span class="variable">$business</span>-&gt;setClientCert( <span class="variable">$cert_path</span> );</span><br><span class="line">					<span class="variable">$business</span>-&gt;setClientKey( <span class="variable">$key_path</span> );</span><br><span class="line"></span><br><span class="line">					<span class="variable">$luckyMoney</span> = <span class="keyword">new</span> LuckMoney(<span class="variable">$business</span>);</span><br><span class="line">					<span class="variable">$luckyMoneyData</span> = [</span><br><span class="line">						<span class="string">'mch_billno'</span>       =&gt; <span class="variable">$mch_billno</span> , <span class="comment">//mch_id+yyyymmdd+10ä½</span></span><br><span class="line">						<span class="string">'send_name'</span>        =&gt; <span class="string">'send_name'</span>,</span><br><span class="line">						<span class="string">'re_openid'</span>        =&gt; <span class="variable">$open_id</span> ,</span><br><span class="line">						<span class="string">'total_num'</span>        =&gt; <span class="number">1</span> ,  			<span class="comment">//å›ºå®šä¸º1ï¼Œå¯ä¸ä¼ </span></span><br><span class="line">						<span class="string">'total_amount'</span>     =&gt; <span class="variable">$money</span> ,      <span class="comment">//å•ä½ä¸ºåˆ†</span></span><br><span class="line">						<span class="string">'wishing'</span>          =&gt; <span class="string">'wishing'</span>,</span><br><span class="line">						<span class="string">'act_name'</span>         =&gt; <span class="string">'act_name'</span>,</span><br><span class="line">						<span class="string">'remark'</span>           =&gt; <span class="string">'remark'</span>,</span><br><span class="line">					];</span><br><span class="line"></span><br><span class="line">					<span class="variable">$result</span> = <span class="variable">$luckyMoney</span>-&gt;sendNormal(<span class="variable">$luckyMoneyData</span>);</span><br><span class="line"></span><br><span class="line">					<span class="comment">// æˆåŠŸåä¿®æ”¹æ•°æ®åº“</span></span><br><span class="line">					<span class="keyword">if</span> ( <span class="variable">$result</span>[<span class="string">'return_code'</span>] == <span class="string">"SUCCESS"</span> &amp;&amp; <span class="variable">$result</span>[<span class="string">'result_code'</span>] == <span class="string">"SUCCESS"</span> )&#123;</span><br><span class="line"></span><br><span class="line">						<span class="variable">$gift</span>-&gt;amount 		 = <span class="variable">$result</span>[<span class="string">'total_amount'</span>] ;</span><br><span class="line">						<span class="variable">$gift</span>-&gt;mch_billno    = <span class="variable">$result</span>[<span class="string">'mch_billno'</span>];</span><br><span class="line">						<span class="variable">$gift</span>-&gt;wechat_billno = <span class="variable">$result</span>[<span class="string">'send_listid'</span>];</span><br><span class="line"></span><br><span class="line">						<span class="variable">$user</span> = <span class="variable">$gift</span>-&gt;user ;</span><br><span class="line">						<span class="keyword">if</span> ( <span class="variable">$user</span> &amp;&amp; <span class="keyword">isset</span>( <span class="variable">$user</span> ) )&#123;</span><br><span class="line">							<span class="variable">$gift</span>-&gt;user_name = <span class="variable">$user</span>-&gt;real_name ? <span class="variable">$user</span>-&gt;real_name : <span class="variable">$user</span>-&gt;nickname ;</span><br><span class="line">							<span class="variable">$gift</span>-&gt;mobile 	 = <span class="variable">$user</span>-&gt;mobile ;</span><br><span class="line">						&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">							<span class="variable">$gift</span>-&gt;remark    = <span class="string">'æœªæ³¨å†Œç”¨æˆ·'</span>;</span><br><span class="line">						&#125;</span><br><span class="line">						<span class="variable">$gift</span>-&gt;invitation  = <span class="variable">$request</span>-&gt;input(<span class="string">'invitation'</span>) || <span class="string">''</span>;</span><br><span class="line">						<span class="variable">$gift</span>-&gt;firing_time = Carbon::now(); </span><br><span class="line">						<span class="variable">$gift</span>-&gt;status = <span class="number">1</span> ;</span><br><span class="line"></span><br><span class="line">					&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">						<span class="variable">$gift</span>-&gt;status = <span class="number">99</span> ;</span><br><span class="line">						<span class="comment">// å¤±è´¥æ—¶è¿”å›å¤±è´¥ä¿¡æ¯ï¼Œå¹¶å°†giftçš„çŠ¶æ€æ ‡è®°ä¸º99å¼‚å¸¸</span></span><br><span class="line">						<span class="variable">$err_msg</span> = <span class="keyword">isset</span>(<span class="variable">$result</span>[<span class="string">'return_msg'</span>]) ? </span><br><span class="line">								<span class="string">'å¾®ä¿¡æ¥å£è¿”å›ï¼š'</span>.<span class="variable">$result</span>[<span class="string">'return_msg'</span>] :</span><br><span class="line">								<span class="keyword">isset</span>(<span class="variable">$result</span>[<span class="string">'err_code'</span>]) || <span class="keyword">isset</span>(<span class="variable">$result</span>[<span class="string">'err_code_des'</span>]) ?</span><br><span class="line">								<span class="string">'å¾®ä¿¡ä¸šåŠ¡æ¥å£è¿”å›ï¼š'</span>.(<span class="keyword">isset</span>(<span class="variable">$result</span>[<span class="string">'err_code'</span>]) ? <span class="variable">$result</span>[<span class="string">'err_code'</span>] : <span class="string">''</span> ).(<span class="keyword">isset</span>(<span class="variable">$result</span>[<span class="string">'err_code_des'</span>]) ? <span class="variable">$result</span>[<span class="string">'err_code_des'</span>] : <span class="string">''</span> ) :</span><br><span class="line">								<span class="string">'å¾®ä¿¡æ¥å£è°ƒç”¨å¤±è´¥'</span> ;</span><br><span class="line">						<span class="variable">$gift</span>-&gt;remark = <span class="variable">$err_msg</span> ;</span><br><span class="line">						<span class="comment">// è¿”å›ç»™ç”¨æˆ·çš„æç¤º</span></span><br><span class="line">						<span class="variable">$err_msg</span> = <span class="string">'çº¢åŒ…å·²ç»è¢«æŠ¢å®Œå•¦&lt;br&gt;æ„Ÿè°¢æ‚¨æŒç»­å…³æ³¨&lt;br&gt;å¥åº·å°±æ˜¯æœ€å¤§çš„è´¢å¯Œ'</span>;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">					<span class="keyword">if</span> ( <span class="variable">$gift</span>-&gt;save() == <span class="keyword">false</span> ) <span class="keyword">throw</span> <span class="keyword">new</span> \<span class="keyword">Exception</span>(<span class="string">'æ–°å¹´çº¢åŒ…æ´»åŠ¨æ•°æ®ä¿å­˜å¤±è´¥'</span>);</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		DB::commit();</span><br><span class="line">		<span class="keyword">if</span> ( <span class="variable">$err_msg</span> )&#123;</span><br><span class="line">			<span class="keyword">return</span> json_encode([</span><br><span class="line">				<span class="string">'code'</span> =&gt; <span class="variable">$err_code</span> ? <span class="variable">$err_code</span> : <span class="number">90001</span> ,</span><br><span class="line">				<span class="string">'errmsg'</span> =&gt; <span class="variable">$err_msg</span> ,</span><br><span class="line">				<span class="string">'data'</span> =&gt; []</span><br><span class="line">			],JSON_UNESCAPED_UNICODE);</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> json_encode([</span><br><span class="line">				<span class="string">'code'</span> =&gt; <span class="number">0</span> ,</span><br><span class="line">				<span class="string">'data'</span> =&gt; []</span><br><span class="line">			],JSON_UNESCAPED_UNICODE);</span><br><span class="line">		&#125;</span><br><span class="line">    &#125;<span class="keyword">catch</span>(\<span class="keyword">Exception</span> <span class="variable">$e</span>)&#123;</span><br><span class="line">	    	DB::rollBack();</span><br><span class="line"></span><br><span class="line">			<span class="variable">$open_id</span> = <span class="variable">$request</span>-&gt;has(<span class="string">'open_id'</span>) ? <span class="variable">$request</span>-&gt;open_id : <span class="string">'no open_id'</span>;</span><br><span class="line"></span><br><span class="line">			Rizhi::one( <span class="string">'happy_new_year_gift'</span> , <span class="variable">$open_id</span>  , <span class="keyword">array</span>(<span class="string">'Message'</span>=&gt;<span class="variable">$e</span>-&gt;getMessage(),<span class="string">'TraceAsString'</span>=&gt;<span class="variable">$e</span>-&gt;getTraceAsString()) );</span><br><span class="line"></span><br><span class="line">			<span class="keyword">return</span> json_encode([</span><br><span class="line">				<span class="string">'code'</span> =&gt; <span class="number">90001</span> ,</span><br><span class="line">				<span class="string">'errmsg'</span> =&gt; <span class="string">'çº¢åŒ…å·²ç»è¢«æŠ¢å®Œå•¦&lt;br&gt;æ„Ÿè°¢æ‚¨æŒç»­å…³æ³¨&lt;br&gt;å¥åº·å°±æ˜¯æœ€å¤§çš„è´¢å¯Œ'</span> ,</span><br><span class="line">				<span class="string">'data'</span> =&gt; []</span><br><span class="line">			],JSON_UNESCAPED_UNICODE);</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">happy_new_year_money</span> <span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">// 20   ä½æ™®é€šç”¨æˆ·éšæœº 5~10  å…ƒ æ¦‚ç‡å æ¯”   36/10000</span></span><br><span class="line">	<span class="comment">// 480  ä½æ™®é€šç”¨æˆ·éšæœº 2~5   å…ƒ æ¦‚ç‡å æ¯”  873/10000</span></span><br><span class="line">	<span class="comment">// 5000 ä½æ™®é€šç”¨æˆ·éšæœº 1~2   å…ƒ æ¦‚ç‡å æ¯” 9091/10000</span></span><br><span class="line">	<span class="variable">$gift</span> = <span class="keyword">new</span> ActivityHappyNewYearModel() ;</span><br><span class="line">	<span class="keyword">if</span> ( <span class="variable">$gift</span>-&gt;count(<span class="string">'gift_id'</span>) &gt;= <span class="number">7850</span> )&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="variable">$resMoney</span> = <span class="number">0</span> ;</span><br><span class="line">		<span class="variable">$money</span> = rand( <span class="number">1</span> , <span class="number">10000</span> );</span><br><span class="line">		<span class="comment">// é™å®šå››æ¡£ çº¢åŒ…çš„ä¸ªæ•° </span></span><br><span class="line">		<span class="variable">$gift_first</span>  = <span class="number">0</span> ;</span><br><span class="line">		<span class="variable">$gift_second</span> = <span class="number">0</span> ;</span><br><span class="line">		<span class="variable">$gift_third</span>  = <span class="number">0</span> ;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>       ( <span class="variable">$money</span> &lt;= <span class="number">36</span>    )&#123;</span><br><span class="line">			<span class="variable">$gift_first</span> = <span class="variable">$gift</span>-&gt;where(<span class="string">'amount'</span>,<span class="string">'&gt;'</span>, <span class="number">500</span> )-&gt;where(<span class="string">'status'</span>,<span class="string">'!='</span>,<span class="number">666</span>)-&gt;where(<span class="string">'amount'</span>,<span class="string">'&lt;='</span>, <span class="number">1000</span> )-&gt;where(<span class="string">'status'</span>,<span class="number">1</span>)-&gt;count(<span class="string">'gift_id'</span>) ;</span><br><span class="line">			<span class="keyword">if</span> ( <span class="variable">$gift_first</span> &lt; <span class="number">20</span>  )&#123;</span><br><span class="line">				<span class="variable">$resMoney</span> = rand( <span class="number">501</span> , <span class="number">1000</span> );</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span> ( <span class="variable">$money</span> &lt;= <span class="number">909</span>   )&#123;</span><br><span class="line">			<span class="variable">$gift_second</span> = <span class="variable">$gift</span>-&gt;where(<span class="string">'amount'</span>,<span class="string">'&gt;'</span>, <span class="number">200</span> )-&gt;where(<span class="string">'amount'</span>,<span class="string">'&lt;='</span>, <span class="number">500</span> )-&gt;where(<span class="string">'status'</span>,<span class="number">1</span>)-&gt;count(<span class="string">'gift_id'</span>) ;</span><br><span class="line">			<span class="keyword">if</span> ( <span class="variable">$gift_second</span> &lt; <span class="number">480</span> )&#123;</span><br><span class="line">				<span class="variable">$resMoney</span> = rand( <span class="number">201</span> , <span class="number">500</span> );</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span> ( <span class="variable">$money</span> &lt;= <span class="number">10000</span>   )&#123;</span><br><span class="line">			<span class="variable">$gift_third</span> = <span class="variable">$gift</span>-&gt;where(<span class="string">'amount'</span>,<span class="string">'&gt;'</span>, <span class="number">99</span> )-&gt;where(<span class="string">'amount'</span>,<span class="string">'&lt;='</span>, <span class="number">200</span> )-&gt;where(<span class="string">'status'</span>,<span class="number">1</span>)-&gt;count(<span class="string">'gift_id'</span>) ;</span><br><span class="line">			<span class="keyword">if</span> ( <span class="variable">$gift_third</span> &lt; <span class="number">5000</span> )&#123;</span><br><span class="line">				<span class="variable">$resMoney</span> = rand( <span class="number">101</span> , <span class="number">200</span> );</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// æŠ½åˆ°çš„æ¡£ä½å·²ç»å‘å®Œçš„æƒ…å†µ</span></span><br><span class="line">		<span class="keyword">if</span> ( !<span class="variable">$resMoney</span> )&#123;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> ( !<span class="variable">$resMoney</span> &amp;&amp; !<span class="variable">$gift_third</span> ) <span class="variable">$gift_third</span> = <span class="variable">$gift</span>-&gt;where(<span class="string">'amount'</span>,<span class="string">'&gt;'</span>, <span class="number">99</span> )-&gt;where(<span class="string">'amount'</span>,<span class="string">'&lt;='</span>, <span class="number">200</span> )-&gt;where(<span class="string">'status'</span>,<span class="number">1</span>)-&gt;count(<span class="string">'gift_id'</span>) ;</span><br><span class="line">			<span class="keyword">if</span> ( !<span class="variable">$resMoney</span> &amp;&amp; <span class="variable">$gift_third</span> &lt; <span class="number">5000</span> ) <span class="variable">$resMoney</span> = rand( <span class="number">101</span> , <span class="number">200</span> );</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> ( !<span class="variable">$resMoney</span> &amp;&amp; !<span class="variable">$gift_second</span> ) <span class="variable">$gift_second</span> = <span class="variable">$gift</span>-&gt;where(<span class="string">'amount'</span>,<span class="string">'&gt;'</span>, <span class="number">200</span> )-&gt;where(<span class="string">'amount'</span>,<span class="string">'&lt;='</span>, <span class="number">500</span> )-&gt;where(<span class="string">'status'</span>,<span class="number">1</span>)-&gt;count(<span class="string">'gift_id'</span>) ;</span><br><span class="line">			<span class="keyword">if</span> ( !<span class="variable">$resMoney</span> &amp;&amp; <span class="variable">$gift_second</span> &lt; <span class="number">480</span> ) <span class="variable">$resMoney</span> = rand( <span class="number">201</span> , <span class="number">500</span> );</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> ( !<span class="variable">$resMoney</span> &amp;&amp; !<span class="variable">$gift_first</span> ) <span class="variable">$gift_first</span> = <span class="variable">$gift</span>-&gt;where(<span class="string">'amount'</span>,<span class="string">'&gt;'</span>, <span class="number">500</span> )-&gt;where(<span class="string">'status'</span>,<span class="string">'!='</span>,<span class="number">666</span>)-&gt;where(<span class="string">'amount'</span>,<span class="string">'&lt;='</span>, <span class="number">1000</span> )-&gt;where(<span class="string">'status'</span>,<span class="number">1</span>)-&gt;count(<span class="string">'gift_id'</span>) ;</span><br><span class="line">			<span class="keyword">if</span> ( !<span class="variable">$resMoney</span> &amp;&amp; <span class="variable">$gift_first</span> &lt; <span class="number">20</span> ) <span class="variable">$resMoney</span> = rand( <span class="number">501</span> , <span class="number">1000</span> );</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable">$resMoney</span> ;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çº¢åŒ…å‘é€æƒ…å†µç»Ÿè®¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">happy_new_year_stats</span> <span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>( !session(<span class="string">'adm_info.adm_id'</span>,<span class="keyword">null</span>) )&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">'æ²¡æœ‰æƒé™'</span>;</span><br><span class="line">		<span class="keyword">return</span> ;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="variable">$gift</span> = <span class="keyword">new</span> ActivityHappyNewYearModel() ;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'å·²å‘æ”¾çº¢åŒ…æ€»æ•°ï¼š'</span> . <span class="variable">$gift</span>-&gt;where(<span class="string">'status'</span>,<span class="number">1</span>)-&gt;count(<span class="string">'gift_id'</span>) .<span class="string">'/5600 ä¸ª &lt;br&gt;'</span>;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'å·²å‘æ”¾æ€»é‡‘é¢ï¼š'</span> . <span class="variable">$gift</span>-&gt;where(<span class="string">'status'</span>,<span class="number">1</span>)-&gt;sum(<span class="string">'amount'</span>)/<span class="number">100</span> . <span class="string">'å…ƒ &lt;br&gt;'</span> ;	</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'----------------------------------------- &lt;br&gt;'</span>;</span><br><span class="line"></span><br><span class="line">	<span class="variable">$gift_count</span> = <span class="variable">$gift</span>-&gt;where(<span class="string">'amount'</span>,<span class="string">'!='</span>, <span class="number">666</span> )-&gt;where(<span class="string">'status'</span>,<span class="number">1</span>)-&gt;count(<span class="string">'gift_id'</span>) ;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'æ™®é€šçº¢åŒ…å·²å‘æ”¾ï¼š'</span> . <span class="variable">$gift_count</span> . <span class="string">'/5500 ä¸ª&lt;br&gt;'</span>;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'å‰©ä½™æ™®é€šçº¢åŒ…ï¼š'</span> . ( <span class="number">5500</span> - <span class="variable">$gift_count</span> ) . <span class="string">'ä¸ª&lt;br&gt;'</span> ;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'----------------------------------------&lt;br&gt;'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="variable">$gift_second</span> = <span class="variable">$gift</span>-&gt;where(<span class="string">'amount'</span>,<span class="string">'&gt;'</span>, <span class="number">99</span> )-&gt;where(<span class="string">'amount'</span>,<span class="string">'&lt;='</span>, <span class="number">200</span> )-&gt;where(<span class="string">'status'</span>,<span class="number">1</span>);</span><br><span class="line">	<span class="variable">$gift_second_count</span> = <span class="variable">$gift_second</span>-&gt;count(<span class="string">'gift_id'</span>) ;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'1~2 å…ƒçº¢åŒ…å·²å‘æ”¾ï¼š'</span> . <span class="variable">$gift_second_count</span> .<span class="string">'/5000&lt;br&gt;'</span>;</span><br><span class="line">	<span class="variable">$gift_second_amount</span> = <span class="variable">$gift_second</span>-&gt;sum(<span class="string">'amount'</span>)/<span class="number">100</span> ;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'æ€»é‡‘é¢ï¼š'</span> . <span class="variable">$gift_second_amount</span> .<span class="string">'&lt;br&gt;'</span> ;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'ä¸­ä½å€¼*æ€»æ•°ï¼š'</span> . <span class="variable">$gift_second_count</span>*<span class="number">1.5</span> .<span class="string">'&lt;br&gt;'</span> ;</span><br><span class="line"></span><br><span class="line">	<span class="variable">$gift_third</span> = <span class="variable">$gift</span>-&gt;where(<span class="string">'amount'</span>,<span class="string">'&gt;'</span>, <span class="number">200</span> )-&gt;where(<span class="string">'amount'</span>,<span class="string">'&lt;='</span>, <span class="number">500</span> )-&gt;where(<span class="string">'status'</span>,<span class="number">1</span>);</span><br><span class="line">	<span class="variable">$gift_third_count</span> = <span class="variable">$gift_third</span>-&gt;count(<span class="string">'gift_id'</span>) ;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'2~5 å…ƒçº¢åŒ…å·²å‘æ”¾ï¼š'</span> . <span class="variable">$gift_third_count</span> .<span class="string">'/480 &lt;br&gt;'</span>;</span><br><span class="line">	<span class="variable">$gift_third_amount</span> = <span class="variable">$gift_third</span>-&gt;sum(<span class="string">'amount'</span>)/<span class="number">100</span> ;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'æ€»é‡‘é¢ï¼š'</span> . <span class="variable">$gift_third_amount</span> .<span class="string">'&lt;br&gt;'</span> ;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'ä¸­ä½å€¼*æ€»æ•°ï¼š'</span> . <span class="variable">$gift_third_count</span>*<span class="number">3.5</span> .<span class="string">'&lt;br&gt;'</span> ;</span><br><span class="line"></span><br><span class="line">	<span class="variable">$gift_forth</span> = <span class="variable">$gift</span>-&gt;where(<span class="string">'amount'</span>,<span class="string">'&gt;'</span>, <span class="number">500</span> )-&gt;where(<span class="string">'amount'</span>,<span class="string">'&lt;='</span>, <span class="number">1000</span> )-&gt;where(<span class="string">'amount'</span>,<span class="string">'!='</span>, <span class="number">666</span> )-&gt;where(<span class="string">'status'</span>,<span class="number">1</span>);</span><br><span class="line">	<span class="variable">$gift_forth_count</span> = <span class="variable">$gift_forth</span>-&gt;count(<span class="string">'gift_id'</span>);</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'5~10 å…ƒçº¢åŒ…å·²å‘æ”¾ï¼š'</span> . <span class="variable">$gift_forth_count</span> .<span class="string">'/20&lt;br&gt;'</span> ;</span><br><span class="line">	<span class="variable">$gift_forth_amount</span> = <span class="variable">$gift_forth</span>-&gt;sum(<span class="string">'amount'</span>)/<span class="number">100</span> ;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'æ€»é‡‘é¢ï¼š'</span> . <span class="variable">$gift_forth_amount</span> .<span class="string">'&lt;br&gt;'</span> ;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'ä¸­ä½å€¼*æ€»æ•°ï¼š'</span> . <span class="variable">$gift_forth_count</span>*<span class="number">7.5</span> .<span class="string">'&lt;br&gt;'</span> ;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'----------------------------------------&lt;br&gt;'</span>;</span><br><span class="line">	<span class="variable">$total</span> = <span class="variable">$gift_second_amount</span> + <span class="variable">$gift_third_amount</span> + <span class="variable">$gift_forth_amount</span> ;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'æ™®é€šçº¢åŒ…å·²å‘æ”¾æ€»é‡‘é¢ï¼š'</span> . <span class="variable">$total</span> .<span class="string">'å…ƒ&lt;br&gt;'</span> ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'----------------------------------------&lt;br&gt;'</span>;</span><br><span class="line">	<span class="variable">$seed_count</span> = <span class="variable">$gift</span>-&gt;where( <span class="string">'amount'</span>, <span class="string">'='</span> , <span class="number">666</span> )-&gt;where(<span class="string">'status'</span>,<span class="number">1</span>)-&gt;count(<span class="string">'gift_id'</span>) ;</span><br><span class="line">       <span class="keyword">echo</span> <span class="string">'666çº¢åŒ…å·²å‘æ”¾ï¼š'</span> . <span class="variable">$seed_count</span> . <span class="string">'/100 ä¸ª&lt;br&gt;'</span> ;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'å‰©ä½™666çº¢åŒ…ï¼š'</span> . ( <span class="number">100</span> - <span class="variable">$seed_count</span> ) . <span class="string">'ä¸ª&lt;br&gt;'</span> ;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'æ€»é‡‘é¢ï¼š'</span> . ( <span class="variable">$seed_count</span>*<span class="number">666</span>/<span class="number">100</span> ) . <span class="string">'å…ƒ&lt;br&gt;'</span> ;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'-----------------------------------------&lt;br&gt;'</span>;</span><br><span class="line">	<span class="variable">$gift_error</span> =  ActivityHappyNewYearModel::where(<span class="string">'status'</span>,<span class="string">'='</span>, <span class="number">99</span> );</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'å¼‚å¸¸ï¼ˆè°ƒç”¨å¾®ä¿¡æ¥å£é”™è¯¯ï¼‰çº¢åŒ…æ•°ï¼š'</span> . <span class="variable">$gift_error</span>-&gt;count() .<span class="string">'&lt;br&gt;'</span>;</span><br><span class="line">	<span class="keyword">echo</span> implode( <span class="string">'&lt;br&gt;'</span> , <span class="variable">$gift_error</span>-&gt;lists(<span class="string">'remark'</span>)-&gt;toArray() );</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php-wechat/">php wechat</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2020 Zoe Ying
    	</div>
      	<div class="footer-right">
      		<a href="https://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
  <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1258930011'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1258930011%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script>
</body>
</html>